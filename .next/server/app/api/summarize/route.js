/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/summarize/route";
exports.ids = ["app/api/summarize/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "child_process":
/*!********************************!*\
  !*** external "child_process" ***!
  \********************************/
/***/ ((module) => {

"use strict";
module.exports = require("child_process");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "vm":
/*!*********************!*\
  !*** external "vm" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("vm");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = require("node:stream/web");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsummarize%2Froute&page=%2Fapi%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsummarize%2Froute&page=%2Fapi%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_aggym_OneDrive_Desktop_projects_youtube_summarizer_app_api_summarize_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/summarize/route.ts */ \"(rsc)/./app/api/summarize/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/summarize/route\",\n        pathname: \"/api/summarize\",\n        filename: \"route\",\n        bundlePath: \"app/api/summarize/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\aggym\\\\OneDrive\\\\Desktop\\\\projects\\\\youtube_summarizer\\\\app\\\\api\\\\summarize\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_aggym_OneDrive_Desktop_projects_youtube_summarizer_app_api_summarize_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZzdW1tYXJpemUlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnN1bW1hcml6ZSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnN1bW1hcml6ZSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNhZ2d5bSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q3Byb2plY3RzJTVDeW91dHViZV9zdW1tYXJpemVyJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNhZ2d5bSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q3Byb2plY3RzJTVDeW91dHViZV9zdW1tYXJpemVyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUErRjtBQUN2QztBQUNxQjtBQUNnRDtBQUM3SDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLHNEQUFzRDtBQUM5RDtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUMwRjs7QUFFMUYiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiQzpcXFxcVXNlcnNcXFxcYWdneW1cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxwcm9qZWN0c1xcXFx5b3V0dWJlX3N1bW1hcml6ZXJcXFxcYXBwXFxcXGFwaVxcXFxzdW1tYXJpemVcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3N1bW1hcml6ZS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3N1bW1hcml6ZVwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvc3VtbWFyaXplL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiQzpcXFxcVXNlcnNcXFxcYWdneW1cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxwcm9qZWN0c1xcXFx5b3V0dWJlX3N1bW1hcml6ZXJcXFxcYXBwXFxcXGFwaVxcXFxzdW1tYXJpemVcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsummarize%2Froute&page=%2Fapi%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/summarize/route.ts":
/*!************************************!*\
  !*** ./app/api/summarize/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var youtube_transcript__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! youtube-transcript */ \"(rsc)/./node_modules/youtube-transcript/dist/youtube-transcript.esm.js\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./lib/prisma.ts\");\n/* harmony import */ var _lib_youtube__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/youtube */ \"(rsc)/./lib/youtube.ts\");\n/* harmony import */ var _google_generative_ai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @google/generative-ai */ \"(rsc)/./node_modules/@google/generative-ai/dist/index.mjs\");\n/* harmony import */ var groq_sdk__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! groq-sdk */ \"(rsc)/./node_modules/groq-sdk/index.mjs\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var ytdl_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ytdl-core */ \"(rsc)/./node_modules/ytdl-core/lib/index.js\");\n/* harmony import */ var ytdl_core__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(ytdl_core__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! child_process */ \"child_process\");\n/* harmony import */ var child_process__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(child_process__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! util */ \"util\");\n/* harmony import */ var util__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(util__WEBPACK_IMPORTED_MODULE_9__);\n\n\n\n\n\n\n\n\n\n\n\n\nconst execAsync = (0,util__WEBPACK_IMPORTED_MODULE_9__.promisify)(child_process__WEBPACK_IMPORTED_MODULE_8__.exec);\n// Add at the top of the file after imports\nconst logger = {\n    info: (message, data)=>{\n        console.log(`[INFO] ${message}`, data ? JSON.stringify(data, null, 2) : '');\n    },\n    error: (message, error)=>{\n        console.error(`[ERROR] ${message}`, {\n            message: error?.message,\n            status: error?.status,\n            stack: error?.stack,\n            cause: error?.cause,\n            details: error?.details,\n            response: error?.response\n        });\n    },\n    debug: (message, data)=>{\n        console.debug(`[DEBUG] ${message}`, data ? JSON.stringify(data, null, 2) : '');\n    }\n};\n// Initialize API clients only when needed\nfunction getGeminiClient() {\n    const apiKey = process.env.GEMINI_API_KEY;\n    if (!apiKey) return null;\n    const genAI = new _google_generative_ai__WEBPACK_IMPORTED_MODULE_4__.GoogleGenerativeAI(apiKey);\n    return genAI;\n}\nfunction getGroqClient() {\n    const apiKey = process.env.GROQ_API_KEY;\n    if (!apiKey) return null;\n    return new groq_sdk__WEBPACK_IMPORTED_MODULE_10__.Groq({\n        apiKey\n    });\n}\nfunction getOpenAIClient() {\n    const apiKey = process.env.OPENAI_API_KEY;\n    if (!apiKey) return null;\n    return new openai__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({\n        apiKey\n    });\n}\n// Helper function to get user-friendly model names\nconst MODEL_NAMES = {\n    gemini: \"Google Gemini\",\n    groq: \"Groq\",\n    gpt4: \"GPT-4\"\n};\n// Helper function to check API key availability\nfunction checkApiKeyAvailability() {\n    return {\n        gemini: !!process.env.GEMINI_API_KEY,\n        groq: !!process.env.GROQ_API_KEY,\n        gpt4: !!process.env.OPENAI_API_KEY\n    };\n}\n// Helper function to clean model outputs\nfunction cleanModelOutput(text) {\n    return text// English prefixes\n    .replace(/^(Okay|Here'?s?( is)?|Let me|I will|I'll|I can|I would|I am going to|Allow me to|Sure|Of course|Certainly|Alright)[^]*?,\\s*/i, '').replace(/^(Here'?s?( is)?|I'?ll?|Let me|I will|I can|I would|I am going to|Allow me to|Sure|Of course|Certainly)[^]*?(summary|translate|breakdown|analysis).*?:\\s*/i, '').replace(/^(Based on|According to).*?,\\s*/i, '').replace(/^I understand.*?[.!]\\s*/i, '').replace(/^(Now|First|Let's),?\\s*/i, '').replace(/^(Here are|The following is|This is|Below is).*?:\\s*/i, '').replace(/^(I'll provide|Let me break|I'll break|I'll help|I've structured).*?:\\s*/i, '').replace(/^(As requested|Following your|In response to).*?:\\s*/i, '')// German prefixes\n    .replace(/^(Okay|Hier( ist)?|Lass mich|Ich werde|Ich kann|Ich würde|Ich möchte|Erlauben Sie mir|Sicher|Natürlich|Gewiss|In Ordnung)[^]*?,\\s*/i, '').replace(/^(Hier( ist)?|Ich werde|Lass mich|Ich kann|Ich würde|Ich möchte)[^]*?(Zusammenfassung|Übersetzung|Analyse).*?:\\s*/i, '').replace(/^(Basierend auf|Laut|Gemäß).*?,\\s*/i, '').replace(/^Ich verstehe.*?[.!]\\s*/i, '').replace(/^(Jetzt|Zunächst|Lass uns),?\\s*/i, '').replace(/^(Hier sind|Folgendes|Dies ist|Im Folgenden).*?:\\s*/i, '').replace(/^(Ich werde|Lass mich|Ich helfe|Ich habe strukturiert).*?:\\s*/i, '').replace(/^(Wie gewünscht|Entsprechend Ihrer|Als Antwort auf).*?:\\s*/i, '')// Remove meta instructions while preserving markdown\n    .replace(/^[^:\\n🎯🎙️#*\\-•]+:\\s*/gm, '') // Remove prefixes but keep markdown and emojis\n    .replace(/^(?![#*\\-•🎯️])[\\s\\d]+\\.\\s*/gm, '') // Remove numbered lists but keep markdown lists\n    .trim();\n}\n// AI Model configuration\nconst AI_MODELS = {\n    gemini: {\n        name: \"gemini\",\n        async generateContent (prompt) {\n            const genAI = getGeminiClient();\n            if (!genAI) {\n                throw new Error(`${MODEL_NAMES.gemini} API key is not configured. Please add your API key in the settings or choose a different model.`);\n            }\n            const model = genAI.getGenerativeModel({\n                model: \"gemini-2.0-flash-001\"\n            });\n            const result = await model.generateContent(prompt);\n            const response = await result.response;\n            return cleanModelOutput(response.text());\n        }\n    }\n};\nasync function splitTranscriptIntoChunks(transcript, chunkSize = 7000, overlap = 1000) {\n    const words = transcript.split(' ');\n    const chunks = [];\n    let currentChunk = [];\n    let currentLength = 0;\n    for (const word of words){\n        if (currentLength + word.length > chunkSize && currentChunk.length > 0) {\n            chunks.push(currentChunk.join(' '));\n            // Keep last few words for overlap\n            const overlapWords = currentChunk.slice(-Math.floor(overlap / 10));\n            currentChunk = [\n                ...overlapWords\n            ];\n            currentLength = overlapWords.join(' ').length;\n        }\n        currentChunk.push(word);\n        currentLength += word.length + 1; // +1 for space\n    }\n    if (currentChunk.length > 0) {\n        chunks.push(currentChunk.join(' '));\n    }\n    return chunks;\n}\nasync function downloadAudio(videoId) {\n    const tempPath = path__WEBPACK_IMPORTED_MODULE_7___default().join('/tmp', `${videoId}_temp.mp3`);\n    const outputPath = path__WEBPACK_IMPORTED_MODULE_7___default().join('/tmp', `${videoId}.flac`);\n    try {\n        logger.info(`Starting audio download for video ${videoId}`);\n        // First download the audio\n        await new Promise((resolve, reject)=>{\n            const videoUrl = `https://www.youtube.com/watch?v=${videoId}`;\n            logger.debug(`Downloading from URL: ${videoUrl}`);\n            // Get video info first\n            ytdl_core__WEBPACK_IMPORTED_MODULE_5___default().getInfo(videoUrl).then((info)=>{\n                logger.info('Video info retrieved:', {\n                    title: info.videoDetails.title,\n                    duration: info.videoDetails.lengthSeconds\n                });\n                // Select the best audio format\n                const audioFormats = ytdl_core__WEBPACK_IMPORTED_MODULE_5___default().filterFormats(info.formats, 'audioonly');\n                const format = audioFormats.sort((a, b)=>{\n                    // Prefer opus/webm formats\n                    if (a.codecs?.includes('opus') && !b.codecs?.includes('opus')) return -1;\n                    if (!a.codecs?.includes('opus') && b.codecs?.includes('opus')) return 1;\n                    // Then sort by audio quality (bitrate)\n                    return (b.audioBitrate || 0) - (a.audioBitrate || 0);\n                })[0];\n                if (!format) {\n                    reject(new Error('No suitable audio format found'));\n                    return;\n                }\n                logger.info('Selected audio format:', {\n                    container: format.container,\n                    codec: format.codecs,\n                    quality: format.quality,\n                    bitrate: format.audioBitrate\n                });\n                const stream = ytdl_core__WEBPACK_IMPORTED_MODULE_5___default().downloadFromInfo(info, {\n                    format\n                });\n                stream.on('error', (error)=>{\n                    logger.error('Error in ytdl stream:', {\n                        error: error.message,\n                        stack: error.stack,\n                        videoId\n                    });\n                    reject(error);\n                });\n                const writeStream = fs__WEBPACK_IMPORTED_MODULE_6___default().createWriteStream(tempPath);\n                writeStream.on('error', (error)=>{\n                    logger.error('Error in write stream:', {\n                        error: error.message,\n                        path: tempPath\n                    });\n                    reject(error);\n                });\n                stream.pipe(writeStream).on('finish', ()=>{\n                    const stats = fs__WEBPACK_IMPORTED_MODULE_6___default().statSync(tempPath);\n                    logger.info(`Audio download completed: ${tempPath}`, {\n                        fileSize: stats.size\n                    });\n                    resolve();\n                }).on('error', (error)=>{\n                    logger.error('Error during audio download:', {\n                        error: error.message,\n                        stack: error.stack\n                    });\n                    reject(error);\n                });\n            }).catch((error)=>{\n                logger.error('Failed to get video info:', {\n                    error: error.message,\n                    stack: error.stack,\n                    videoId\n                });\n                reject(error);\n            });\n        });\n        // Verify the temp file exists and has content\n        const tempStats = fs__WEBPACK_IMPORTED_MODULE_6___default().statSync(tempPath);\n        if (tempStats.size === 0) {\n            throw new Error('Downloaded audio file is empty');\n        }\n        logger.info('Temp file verification:', {\n            size: tempStats.size,\n            path: tempPath\n        });\n        // Convert to optimal format for Whisper\n        logger.info('Converting audio to FLAC format...');\n        try {\n            const { stdout, stderr } = await execAsync(`ffmpeg -i ${tempPath} -ar 16000 -ac 1 -c:a flac ${outputPath}`);\n            logger.debug('FFmpeg output:', {\n                stdout,\n                stderr\n            });\n        } catch (error) {\n            logger.error('FFmpeg conversion failed:', {\n                error: error.message,\n                stdout: error.stdout,\n                stderr: error.stderr\n            });\n            throw error;\n        }\n        // Verify the output file\n        const stats = fs__WEBPACK_IMPORTED_MODULE_6___default().statSync(outputPath);\n        if (stats.size === 0) {\n            throw new Error('Converted FLAC file is empty');\n        }\n        logger.info('Audio conversion completed successfully:', {\n            inputSize: tempStats.size,\n            outputSize: stats.size,\n            outputPath\n        });\n        // Clean up temp file\n        fs__WEBPACK_IMPORTED_MODULE_6___default().unlinkSync(tempPath);\n        logger.info('Temporary MP3 file cleaned up');\n        return outputPath;\n    } catch (error) {\n        logger.error('Error in downloadAudio:', {\n            error: error instanceof Error ? {\n                message: error.message,\n                stack: error.stack\n            } : error,\n            videoId,\n            tempPath,\n            outputPath\n        });\n        // Clean up any files in case of error\n        if (fs__WEBPACK_IMPORTED_MODULE_6___default().existsSync(tempPath)) {\n            try {\n                fs__WEBPACK_IMPORTED_MODULE_6___default().unlinkSync(tempPath);\n                logger.info('Cleaned up temp MP3 file after error');\n            } catch (cleanupError) {\n                logger.error('Failed to cleanup temp MP3 file:', cleanupError);\n            }\n        }\n        if (fs__WEBPACK_IMPORTED_MODULE_6___default().existsSync(outputPath)) {\n            try {\n                fs__WEBPACK_IMPORTED_MODULE_6___default().unlinkSync(outputPath);\n                logger.info('Cleaned up FLAC file after error');\n            } catch (cleanupError) {\n                logger.error('Failed to cleanup FLAC file:', cleanupError);\n            }\n        }\n        throw error;\n    }\n}\nasync function transcribeWithWhisper(audioPath) {\n    try {\n        logger.info('Starting transcription process with OpenAI Whisper');\n        // Verify input file\n        const inputStats = fs__WEBPACK_IMPORTED_MODULE_6___default().statSync(audioPath);\n        logger.debug('Input file details:', {\n            size: inputStats.size,\n            path: audioPath\n        });\n        const openai = getOpenAIClient();\n        if (!openai) {\n            throw new Error('OpenAI API key not configured for Whisper transcription.');\n        }\n        // Read file as buffer\n        const audioBuffer = await fs__WEBPACK_IMPORTED_MODULE_6___default().promises.readFile(audioPath);\n        logger.info(`Read audio file of size: ${audioBuffer.length} bytes`);\n        try {\n            logger.info('Sending request to OpenAI Whisper API...');\n            const transcription = await openai.audio.transcriptions.create({\n                file: new File([\n                    audioBuffer\n                ], 'audio.flac', {\n                    type: 'audio/flac'\n                }),\n                model: 'whisper-1',\n                language: 'auto'\n            });\n            logger.info('Successfully received transcription from Whisper');\n            return transcription.text;\n        } catch (error) {\n            logger.error('Transcription request failed:', error);\n            throw new Error(`Whisper transcription failed: ${error.message || 'Unknown error'}`);\n        }\n    } finally{\n        // Cleanup: Delete the temporary audio file\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_6___default().promises.unlink(audioPath);\n            logger.info('Cleaned up temporary audio file');\n        } catch (error) {\n            logger.error('Failed to delete temporary audio file:', error);\n        }\n    }\n}\nasync function getTranscript(videoId) {\n    try {\n        logger.info(`Attempting to fetch YouTube transcript for video ${videoId}`);\n        // First try YouTube transcripts\n        const transcriptList = await youtube_transcript__WEBPACK_IMPORTED_MODULE_1__.YoutubeTranscript.fetchTranscript(videoId);\n        // Extract title and process transcript as before\n        const firstFewLines = transcriptList.slice(0, 5).map((item)=>item.text).join(' ');\n        let title = firstFewLines.split('.')[0].trim();\n        if (title.length > 100) {\n            title = title.substring(0, 97) + '...';\n        }\n        if (title.length < 10) {\n            title = `YouTube Video Summary`;\n        }\n        logger.info('Successfully retrieved YouTube transcript');\n        logger.debug('Transcript details:', {\n            title,\n            length: transcriptList.length,\n            firstLine: transcriptList[0]?.text\n        });\n        return {\n            transcript: transcriptList.map((item)=>item.text).join(' '),\n            source: 'youtube',\n            title\n        };\n    } catch (error) {\n        logger.info('YouTube transcript not available, falling back to Whisper...', {\n            error: error instanceof Error ? error.message : String(error)\n        });\n        try {\n            // Get video info for title\n            logger.info('Fetching video info from YouTube');\n            const videoInfo = await ytdl_core__WEBPACK_IMPORTED_MODULE_5___default().getInfo(videoId).catch((infoError)=>{\n                logger.error('Failed to get video info:', {\n                    error: infoError instanceof Error ? {\n                        message: infoError.message,\n                        stack: infoError.stack\n                    } : infoError,\n                    videoId\n                });\n                throw infoError;\n            });\n            const title = videoInfo.videoDetails.title;\n            logger.info('Video info retrieved successfully:', {\n                title,\n                duration: videoInfo.videoDetails.lengthSeconds,\n                author: videoInfo.videoDetails.author.name\n            });\n            // Check if OpenAI API is available\n            const openai = getOpenAIClient();\n            if (!openai) {\n                const error = 'Transcript not available and OpenAI API key not configured for Whisper fallback.';\n                logger.error(error, {\n                    message: error\n                });\n                throw new Error(error);\n            }\n            // Download and transcribe\n            try {\n                const audioPath = await downloadAudio(videoId);\n                logger.info('Audio downloaded successfully', {\n                    path: audioPath,\n                    fileStats: fs__WEBPACK_IMPORTED_MODULE_6___default().statSync(audioPath)\n                });\n                const transcript = await transcribeWithWhisper(audioPath);\n                logger.info('Transcription completed successfully', {\n                    transcriptLength: transcript.length\n                });\n                return {\n                    transcript,\n                    source: 'whisper',\n                    title\n                };\n            } catch (processingError) {\n                logger.error('Processing error:', {\n                    phase: typeof processingError === 'object' && processingError !== null && 'phase' in processingError ? processingError.phase : 'unknown',\n                    error: processingError instanceof Error ? {\n                        message: processingError.message,\n                        stack: processingError.stack\n                    } : String(processingError)\n                });\n                throw processingError;\n            }\n        } catch (error) {\n            logger.error('Failed to get transcript:', {\n                error: error instanceof Error ? {\n                    message: error.message,\n                    stack: error.stack\n                } : error,\n                videoId\n            });\n            throw new Error(`Failed to process video: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n}\n// Add new endpoint to check API key availability\nasync function GET(req) {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(checkApiKeyAvailability());\n}\nasync function POST(req) {\n    const encoder = new TextEncoder();\n    const stream = new TransformStream();\n    const writer = stream.writable.getWriter();\n    const writeProgress = async (data)=>{\n        await writer.write(encoder.encode(JSON.stringify(data) + '\\n'));\n    };\n    (async ()=>{\n        try {\n            const { url, language, mode, aiModel = 'gemini' } = await req.json();\n            const videoId = (0,_lib_youtube__WEBPACK_IMPORTED_MODULE_3__.extractVideoId)(url);\n            logger.info('Processing video request', {\n                videoId,\n                language,\n                mode,\n                aiModel\n            });\n            if (!AI_MODELS[aiModel]) {\n                throw new Error(`Invalid AI model selected. Please choose from: ${Object.values(MODEL_NAMES).join(', ')}`);\n            }\n            const selectedModel = AI_MODELS[aiModel];\n            logger.info(`Using ${MODEL_NAMES[aiModel]} model for generation...`);\n            // Check cache first\n            const existingSummary = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.summary.findFirst({\n                where: {\n                    videoId,\n                    language\n                }\n            });\n            if (existingSummary) {\n                await writeProgress({\n                    type: 'complete',\n                    summary: existingSummary.content,\n                    source: 'cache',\n                    status: 'completed'\n                });\n                await writer.close();\n                return;\n            }\n            // Get transcript\n            await writeProgress({\n                type: 'progress',\n                currentChunk: 0,\n                totalChunks: 1,\n                stage: 'analyzing',\n                message: 'Fetching video transcript...'\n            });\n            const { transcript, source, title } = await getTranscript(videoId);\n            const chunks = await splitTranscriptIntoChunks(transcript);\n            const totalChunks = chunks.length;\n            const intermediateSummaries = [];\n            // Process chunks\n            for(let i = 0; i < chunks.length; i++){\n                await writeProgress({\n                    type: 'progress',\n                    currentChunk: i + 1,\n                    totalChunks,\n                    stage: 'processing',\n                    message: `Processing section ${i + 1} of ${totalChunks}...`\n                });\n                const prompt = `Create a detailed summary of section ${i + 1} in ${language}.\n        Maintain all important information, arguments, and connections.\n        Pay special attention to:\n        - Main topics and arguments\n        - Important details and examples\n        - Connections with other mentioned topics\n        - Key statements and conclusions\n\n        Text: ${chunks[i]}`;\n                const text = await selectedModel.generateContent(prompt);\n                intermediateSummaries.push(text);\n            }\n            // Generate final summary\n            await writeProgress({\n                type: 'progress',\n                currentChunk: totalChunks,\n                totalChunks,\n                stage: 'finalizing',\n                message: 'Creating final summary...'\n            });\n            const combinedSummary = intermediateSummaries.join('\\n\\n=== Next Section ===\\n\\n');\n            const finalPrompt = (0,_lib_youtube__WEBPACK_IMPORTED_MODULE_3__.createSummaryPrompt)(combinedSummary, language, mode);\n            const summary = await selectedModel.generateContent(finalPrompt);\n            if (!summary) {\n                throw new Error('No summary content generated');\n            }\n            // Save to database\n            await writeProgress({\n                type: 'progress',\n                currentChunk: totalChunks,\n                totalChunks,\n                stage: 'saving',\n                message: 'Saving summary to history...'\n            });\n            try {\n                // Check if summary already exists\n                const existingSummary = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.summary.findFirst({\n                    where: {\n                        videoId,\n                        language\n                    }\n                });\n                let savedSummary;\n                if (existingSummary) {\n                    // Update existing summary\n                    savedSummary = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.summary.update({\n                        where: {\n                            id: existingSummary.id\n                        },\n                        data: {\n                            content: summary,\n                            mode,\n                            source,\n                            updatedAt: new Date()\n                        }\n                    });\n                } else {\n                    // Create new summary\n                    savedSummary = await _lib_prisma__WEBPACK_IMPORTED_MODULE_2__.prisma.summary.create({\n                        data: {\n                            videoId,\n                            title,\n                            content: summary,\n                            language,\n                            mode,\n                            source\n                        }\n                    });\n                }\n                await writeProgress({\n                    type: 'complete',\n                    summary: savedSummary.content,\n                    source: savedSummary.source || 'youtube',\n                    status: 'completed'\n                });\n            } catch (dbError) {\n                console.warn('Warning: Failed to save to database -', dbError?.message || 'Unknown database error');\n                // Still return the summary even if saving failed\n                await writeProgress({\n                    type: 'complete',\n                    summary,\n                    source: source || 'youtube',\n                    status: 'completed',\n                    warning: 'Failed to save to history'\n                });\n            }\n        } catch (error) {\n            logger.error('Error processing video:', {\n                error,\n                stack: error?.stack,\n                cause: error?.cause\n            });\n            await writeProgress({\n                type: 'error',\n                error: error?.message || 'Failed to process video',\n                details: error?.toString() || 'Unknown error'\n            }).catch((writeError)=>{\n                logger.error('Failed to write error progress:', writeError);\n            });\n        } finally{\n            await writer.close().catch((closeError)=>{\n                logger.error('Failed to close writer:', closeError);\n            });\n        }\n    })();\n    return new Response(stream.readable, {\n        headers: {\n            'Content-Type': 'text/event-stream',\n            'Cache-Control': 'no-cache',\n            'Connection': 'keep-alive'\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Qzs0QkFDQWlDOzRCQUNBdkI7d0JBQ0Y7b0JBQ0Y7Z0JBQ0Y7Z0JBRUEsTUFBTW1CLGNBQWM7b0JBQ2xCOUIsTUFBTTtvQkFDTndDLFNBQVNXLGFBQWFSLE9BQU87b0JBQzdCaEMsUUFBUXdDLGFBQWF4QyxNQUFNLElBQUk7b0JBQy9CekgsUUFBUTtnQkFDVjtZQUNGLEVBQUUsT0FBT3NLLFNBQWM7Z0JBQ3JCM0ssUUFBUTRLLElBQUksQ0FBQyx5Q0FBeUNELFNBQVM3SyxXQUFXO2dCQUUxRSxpREFBaUQ7Z0JBQ2pELE1BQU1tSixjQUFjO29CQUNsQjlCLE1BQU07b0JBQ053QztvQkFDQTdCLFFBQVFBLFVBQVU7b0JBQ2xCekgsUUFBUTtvQkFDUndLLFNBQVM7Z0JBQ1g7WUFDRjtRQUVGLEVBQUUsT0FBT3pLLE9BQVk7WUFDbkJSLE9BQU9RLEtBQUssQ0FBQywyQkFBMkI7Z0JBQ3RDQTtnQkFDQUUsT0FBT0YsT0FBT0U7Z0JBQ2RDLE9BQU9ILE9BQU9HO1lBQ2hCO1lBRUEsTUFBTTBJLGNBQWM7Z0JBQ2xCOUIsTUFBTTtnQkFDTi9HLE9BQU9BLE9BQU9OLFdBQVc7Z0JBQ3pCVSxTQUFTSixPQUFPMEssY0FBYztZQUNoQyxHQUFHakYsS0FBSyxDQUFDLENBQUNrRjtnQkFDUm5MLE9BQU9RLEtBQUssQ0FBQyxtQ0FBbUMySztZQUNsRDtRQUNGLFNBQVU7WUFDUixNQUFNakMsT0FBT2lCLEtBQUssR0FBR2xFLEtBQUssQ0FBQyxDQUFDbUY7Z0JBQzFCcEwsT0FBT1EsS0FBSyxDQUFDLDJCQUEyQjRLO1lBQzFDO1FBQ0Y7SUFDRjtJQUVBLE9BQU8sSUFBSUMsU0FBUzlGLE9BQU8rRixRQUFRLEVBQUU7UUFDbkNDLFNBQVM7WUFDUCxnQkFBZ0I7WUFDaEIsaUJBQWlCO1lBQ2pCLGNBQWM7UUFDaEI7SUFDRjtBQUNGIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGFnZ3ltXFxPbmVEcml2ZVxcRGVza3RvcFxccHJvamVjdHNcXHlvdXR1YmVfc3VtbWFyaXplclxcYXBwXFxhcGlcXHN1bW1hcml6ZVxccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XHJcbmltcG9ydCB7IFlvdXR1YmVUcmFuc2NyaXB0IH0gZnJvbSAneW91dHViZS10cmFuc2NyaXB0JztcclxuaW1wb3J0IHsgcHJpc21hIH0gZnJvbSBcIkAvbGliL3ByaXNtYVwiO1xyXG5pbXBvcnQgeyBleHRyYWN0VmlkZW9JZCwgY3JlYXRlU3VtbWFyeVByb21wdCB9IGZyb20gJ0AvbGliL3lvdXR1YmUnO1xyXG5pbXBvcnQgeyBHb29nbGVHZW5lcmF0aXZlQUkgfSBmcm9tIFwiQGdvb2dsZS9nZW5lcmF0aXZlLWFpXCI7XHJcbmltcG9ydCB7IEdyb3EgfSBmcm9tIFwiZ3JvcS1zZGtcIjtcclxuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknO1xyXG5pbXBvcnQgeXRkbCBmcm9tICd5dGRsLWNvcmUnO1xyXG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcclxuaW1wb3J0IHsgZXhlYyB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xyXG5pbXBvcnQgeyBwcm9taXNpZnkgfSBmcm9tICd1dGlsJztcclxuaW1wb3J0IEZvcm1EYXRhIGZyb20gJ2Zvcm0tZGF0YSc7XHJcbmltcG9ydCBmZXRjaCBmcm9tICdub2RlLWZldGNoJztcclxuXHJcbmNvbnN0IGV4ZWNBc3luYyA9IHByb21pc2lmeShleGVjKTtcclxuXHJcbi8vIEFkZCBhdCB0aGUgdG9wIG9mIHRoZSBmaWxlIGFmdGVyIGltcG9ydHNcclxuY29uc3QgbG9nZ2VyID0ge1xyXG4gIGluZm86IChtZXNzYWdlOiBzdHJpbmcsIGRhdGE/OiBhbnkpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGBbSU5GT10gJHttZXNzYWdlfWAsIGRhdGEgPyBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSA6ICcnKTtcclxuICB9LFxyXG4gIGVycm9yOiAobWVzc2FnZTogc3RyaW5nLCBlcnJvcjogYW55KSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGBbRVJST1JdICR7bWVzc2FnZX1gLCB7XHJcbiAgICAgIG1lc3NhZ2U6IGVycm9yPy5tZXNzYWdlLFxyXG4gICAgICBzdGF0dXM6IGVycm9yPy5zdGF0dXMsXHJcbiAgICAgIHN0YWNrOiBlcnJvcj8uc3RhY2ssXHJcbiAgICAgIGNhdXNlOiBlcnJvcj8uY2F1c2UsXHJcbiAgICAgIGRldGFpbHM6IGVycm9yPy5kZXRhaWxzLFxyXG4gICAgICByZXNwb25zZTogZXJyb3I/LnJlc3BvbnNlLFxyXG4gICAgfSk7XHJcbiAgfSxcclxuICBkZWJ1ZzogKG1lc3NhZ2U6IHN0cmluZywgZGF0YT86IGFueSkgPT4ge1xyXG4gICAgY29uc29sZS5kZWJ1ZyhgW0RFQlVHXSAke21lc3NhZ2V9YCwgZGF0YSA/IEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpIDogJycpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vIEluaXRpYWxpemUgQVBJIGNsaWVudHMgb25seSB3aGVuIG5lZWRlZFxyXG5mdW5jdGlvbiBnZXRHZW1pbmlDbGllbnQoKSB7XHJcbiAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVk7XHJcbiAgaWYgKCFhcGlLZXkpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IGdlbkFJID0gbmV3IEdvb2dsZUdlbmVyYXRpdmVBSShhcGlLZXkpO1xyXG4gIHJldHVybiBnZW5BSTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0R3JvcUNsaWVudCgpIHtcclxuICBjb25zdCBhcGlLZXkgPSBwcm9jZXNzLmVudi5HUk9RX0FQSV9LRVk7XHJcbiAgaWYgKCFhcGlLZXkpIHJldHVybiBudWxsO1xyXG4gIHJldHVybiBuZXcgR3JvcSh7IGFwaUtleSB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0T3BlbkFJQ2xpZW50KCkge1xyXG4gIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZO1xyXG4gIGlmICghYXBpS2V5KSByZXR1cm4gbnVsbDtcclxuICByZXR1cm4gbmV3IE9wZW5BSSh7IGFwaUtleSB9KTtcclxufVxyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCB1c2VyLWZyaWVuZGx5IG1vZGVsIG5hbWVzXHJcbmNvbnN0IE1PREVMX05BTUVTID0ge1xyXG4gIGdlbWluaTogXCJHb29nbGUgR2VtaW5pXCIsXHJcbiAgZ3JvcTogXCJHcm9xXCIsXHJcbiAgZ3B0NDogXCJHUFQtNFwiXHJcbn07XHJcblxyXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgQVBJIGtleSBhdmFpbGFiaWxpdHlcclxuZnVuY3Rpb24gY2hlY2tBcGlLZXlBdmFpbGFiaWxpdHkoKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIGdlbWluaTogISFwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWSxcclxuICAgIGdyb3E6ICEhcHJvY2Vzcy5lbnYuR1JPUV9BUElfS0VZLFxyXG4gICAgZ3B0NDogISFwcm9jZXNzLmVudi5PUEVOQUlfQVBJX0tFWVxyXG4gIH07XHJcbn1cclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBjbGVhbiBtb2RlbCBvdXRwdXRzXHJcbmZ1bmN0aW9uIGNsZWFuTW9kZWxPdXRwdXQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICByZXR1cm4gdGV4dFxyXG4gICAgLy8gRW5nbGlzaCBwcmVmaXhlc1xyXG4gICAgLnJlcGxhY2UoL14oT2theXxIZXJlJz9zPyggaXMpP3xMZXQgbWV8SSB3aWxsfEknbGx8SSBjYW58SSB3b3VsZHxJIGFtIGdvaW5nIHRvfEFsbG93IG1lIHRvfFN1cmV8T2YgY291cnNlfENlcnRhaW5seXxBbHJpZ2h0KVteXSo/LFxccyovaSwgJycpXHJcbiAgICAucmVwbGFjZSgvXihIZXJlJz9zPyggaXMpP3xJJz9sbD98TGV0IG1lfEkgd2lsbHxJIGNhbnxJIHdvdWxkfEkgYW0gZ29pbmcgdG98QWxsb3cgbWUgdG98U3VyZXxPZiBjb3Vyc2V8Q2VydGFpbmx5KVteXSo/KHN1bW1hcnl8dHJhbnNsYXRlfGJyZWFrZG93bnxhbmFseXNpcykuKj86XFxzKi9pLCAnJylcclxuICAgIC5yZXBsYWNlKC9eKEJhc2VkIG9ufEFjY29yZGluZyB0bykuKj8sXFxzKi9pLCAnJylcclxuICAgIC5yZXBsYWNlKC9eSSB1bmRlcnN0YW5kLio/Wy4hXVxccyovaSwgJycpXHJcbiAgICAucmVwbGFjZSgvXihOb3d8Rmlyc3R8TGV0J3MpLD9cXHMqL2ksICcnKVxyXG4gICAgLnJlcGxhY2UoL14oSGVyZSBhcmV8VGhlIGZvbGxvd2luZyBpc3xUaGlzIGlzfEJlbG93IGlzKS4qPzpcXHMqL2ksICcnKVxyXG4gICAgLnJlcGxhY2UoL14oSSdsbCBwcm92aWRlfExldCBtZSBicmVha3xJJ2xsIGJyZWFrfEknbGwgaGVscHxJJ3ZlIHN0cnVjdHVyZWQpLio/OlxccyovaSwgJycpXHJcbiAgICAucmVwbGFjZSgvXihBcyByZXF1ZXN0ZWR8Rm9sbG93aW5nIHlvdXJ8SW4gcmVzcG9uc2UgdG8pLio/OlxccyovaSwgJycpXHJcbiAgICAvLyBHZXJtYW4gcHJlZml4ZXNcclxuICAgIC5yZXBsYWNlKC9eKE9rYXl8SGllciggaXN0KT98TGFzcyBtaWNofEljaCB3ZXJkZXxJY2gga2FubnxJY2ggd8O8cmRlfEljaCBtw7ZjaHRlfEVybGF1YmVuIFNpZSBtaXJ8U2ljaGVyfE5hdMO8cmxpY2h8R2V3aXNzfEluIE9yZG51bmcpW15dKj8sXFxzKi9pLCAnJylcclxuICAgIC5yZXBsYWNlKC9eKEhpZXIoIGlzdCk/fEljaCB3ZXJkZXxMYXNzIG1pY2h8SWNoIGthbm58SWNoIHfDvHJkZXxJY2ggbcO2Y2h0ZSlbXl0qPyhadXNhbW1lbmZhc3N1bmd8w5xiZXJzZXR6dW5nfEFuYWx5c2UpLio/OlxccyovaSwgJycpXHJcbiAgICAucmVwbGFjZSgvXihCYXNpZXJlbmQgYXVmfExhdXR8R2Vtw6TDnykuKj8sXFxzKi9pLCAnJylcclxuICAgIC5yZXBsYWNlKC9eSWNoIHZlcnN0ZWhlLio/Wy4hXVxccyovaSwgJycpXHJcbiAgICAucmVwbGFjZSgvXihKZXR6dHxadW7DpGNoc3R8TGFzcyB1bnMpLD9cXHMqL2ksICcnKVxyXG4gICAgLnJlcGxhY2UoL14oSGllciBzaW5kfEZvbGdlbmRlc3xEaWVzIGlzdHxJbSBGb2xnZW5kZW4pLio/OlxccyovaSwgJycpXHJcbiAgICAucmVwbGFjZSgvXihJY2ggd2VyZGV8TGFzcyBtaWNofEljaCBoZWxmZXxJY2ggaGFiZSBzdHJ1a3R1cmllcnQpLio/OlxccyovaSwgJycpXHJcbiAgICAucmVwbGFjZSgvXihXaWUgZ2V3w7xuc2NodHxFbnRzcHJlY2hlbmQgSWhyZXJ8QWxzIEFudHdvcnQgYXVmKS4qPzpcXHMqL2ksICcnKVxyXG4gICAgLy8gUmVtb3ZlIG1ldGEgaW5zdHJ1Y3Rpb25zIHdoaWxlIHByZXNlcnZpbmcgbWFya2Rvd25cclxuICAgIC5yZXBsYWNlKC9eW146XFxu8J+Or/CfjpnvuI8jKlxcLeKAol0rOlxccyovZ20sICcnKSAgLy8gUmVtb3ZlIHByZWZpeGVzIGJ1dCBrZWVwIG1hcmtkb3duIGFuZCBlbW9qaXNcclxuICAgIC5yZXBsYWNlKC9eKD8hWyMqXFwt4oCi8J+Or++4j10pW1xcc1xcZF0rXFwuXFxzKi9nbSwgJycpIC8vIFJlbW92ZSBudW1iZXJlZCBsaXN0cyBidXQga2VlcCBtYXJrZG93biBsaXN0c1xyXG4gICAgLnRyaW0oKTtcclxufVxyXG5cclxuLy8gQUkgTW9kZWwgY29uZmlndXJhdGlvblxyXG5jb25zdCBBSV9NT0RFTFMgPSB7XHJcbiAgZ2VtaW5pOiB7XHJcbiAgICBuYW1lOiBcImdlbWluaVwiLFxyXG4gICAgYXN5bmMgZ2VuZXJhdGVDb250ZW50KHByb21wdDogc3RyaW5nKSB7XHJcbiAgICAgIGNvbnN0IGdlbkFJID0gZ2V0R2VtaW5pQ2xpZW50KCk7XHJcbiAgICAgIGlmICghZ2VuQUkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYCR7TU9ERUxfTkFNRVMuZ2VtaW5pfSBBUEkga2V5IGlzIG5vdCBjb25maWd1cmVkLiBQbGVhc2UgYWRkIHlvdXIgQVBJIGtleSBpbiB0aGUgc2V0dGluZ3Mgb3IgY2hvb3NlIGEgZGlmZmVyZW50IG1vZGVsLmApO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IG1vZGVsID0gZ2VuQUkuZ2V0R2VuZXJhdGl2ZU1vZGVsKHsgbW9kZWw6IFwiZ2VtaW5pLTIuMC1mbGFzaC0wMDFcIiB9KTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9kZWwuZ2VuZXJhdGVDb250ZW50KHByb21wdCk7XHJcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzdWx0LnJlc3BvbnNlO1xyXG4gICAgICByZXR1cm4gY2xlYW5Nb2RlbE91dHB1dChyZXNwb25zZS50ZXh0KCkpO1xyXG4gICAgfVxyXG4gIH0sXHJcblxyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gc3BsaXRUcmFuc2NyaXB0SW50b0NodW5rcyh0cmFuc2NyaXB0OiBzdHJpbmcsIGNodW5rU2l6ZTogbnVtYmVyID0gNzAwMCwgb3ZlcmxhcDogbnVtYmVyID0gMTAwMCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICBjb25zdCB3b3JkcyA9IHRyYW5zY3JpcHQuc3BsaXQoJyAnKTtcclxuICBjb25zdCBjaHVua3M6IHN0cmluZ1tdID0gW107XHJcbiAgbGV0IGN1cnJlbnRDaHVuazogc3RyaW5nW10gPSBbXTtcclxuICBsZXQgY3VycmVudExlbmd0aCA9IDA7XHJcblxyXG4gIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xyXG4gICAgaWYgKGN1cnJlbnRMZW5ndGggKyB3b3JkLmxlbmd0aCA+IGNodW5rU2l6ZSAmJiBjdXJyZW50Q2h1bmsubGVuZ3RoID4gMCkge1xyXG4gICAgICBjaHVua3MucHVzaChjdXJyZW50Q2h1bmsuam9pbignICcpKTtcclxuICAgICAgLy8gS2VlcCBsYXN0IGZldyB3b3JkcyBmb3Igb3ZlcmxhcFxyXG4gICAgICBjb25zdCBvdmVybGFwV29yZHMgPSBjdXJyZW50Q2h1bmsuc2xpY2UoLU1hdGguZmxvb3Iob3ZlcmxhcCAvIDEwKSk7XHJcbiAgICAgIGN1cnJlbnRDaHVuayA9IFsuLi5vdmVybGFwV29yZHNdO1xyXG4gICAgICBjdXJyZW50TGVuZ3RoID0gb3ZlcmxhcFdvcmRzLmpvaW4oJyAnKS5sZW5ndGg7XHJcbiAgICB9XHJcbiAgICBjdXJyZW50Q2h1bmsucHVzaCh3b3JkKTtcclxuICAgIGN1cnJlbnRMZW5ndGggKz0gd29yZC5sZW5ndGggKyAxOyAvLyArMSBmb3Igc3BhY2VcclxuICB9XHJcblxyXG4gIGlmIChjdXJyZW50Q2h1bmsubGVuZ3RoID4gMCkge1xyXG4gICAgY2h1bmtzLnB1c2goY3VycmVudENodW5rLmpvaW4oJyAnKSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gY2h1bmtzO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBkb3dubG9hZEF1ZGlvKHZpZGVvSWQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgdGVtcFBhdGggPSBwYXRoLmpvaW4oJy90bXAnLCBgJHt2aWRlb0lkfV90ZW1wLm1wM2ApO1xyXG4gIGNvbnN0IG91dHB1dFBhdGggPSBwYXRoLmpvaW4oJy90bXAnLCBgJHt2aWRlb0lkfS5mbGFjYCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBsb2dnZXIuaW5mbyhgU3RhcnRpbmcgYXVkaW8gZG93bmxvYWQgZm9yIHZpZGVvICR7dmlkZW9JZH1gKTtcclxuXHJcbiAgICAvLyBGaXJzdCBkb3dubG9hZCB0aGUgYXVkaW9cclxuICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29uc3QgdmlkZW9VcmwgPSBgaHR0cHM6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0ke3ZpZGVvSWR9YDtcclxuICAgICAgbG9nZ2VyLmRlYnVnKGBEb3dubG9hZGluZyBmcm9tIFVSTDogJHt2aWRlb1VybH1gKTtcclxuXHJcbiAgICAgIC8vIEdldCB2aWRlbyBpbmZvIGZpcnN0XHJcbiAgICAgIHl0ZGwuZ2V0SW5mbyh2aWRlb1VybCkudGhlbihpbmZvID0+IHtcclxuICAgICAgICBsb2dnZXIuaW5mbygnVmlkZW8gaW5mbyByZXRyaWV2ZWQ6Jywge1xyXG4gICAgICAgICAgdGl0bGU6IGluZm8udmlkZW9EZXRhaWxzLnRpdGxlLFxyXG4gICAgICAgICAgZHVyYXRpb246IGluZm8udmlkZW9EZXRhaWxzLmxlbmd0aFNlY29uZHNcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU2VsZWN0IHRoZSBiZXN0IGF1ZGlvIGZvcm1hdFxyXG4gICAgICAgIGNvbnN0IGF1ZGlvRm9ybWF0cyA9IHl0ZGwuZmlsdGVyRm9ybWF0cyhpbmZvLmZvcm1hdHMsICdhdWRpb29ubHknKTtcclxuICAgICAgICBjb25zdCBmb3JtYXQgPSBhdWRpb0Zvcm1hdHMuc29ydCgoYSwgYikgPT4ge1xyXG4gICAgICAgICAgLy8gUHJlZmVyIG9wdXMvd2VibSBmb3JtYXRzXHJcbiAgICAgICAgICBpZiAoYS5jb2RlY3M/LmluY2x1ZGVzKCdvcHVzJykgJiYgIWIuY29kZWNzPy5pbmNsdWRlcygnb3B1cycpKSByZXR1cm4gLTE7XHJcbiAgICAgICAgICBpZiAoIWEuY29kZWNzPy5pbmNsdWRlcygnb3B1cycpICYmIGIuY29kZWNzPy5pbmNsdWRlcygnb3B1cycpKSByZXR1cm4gMTtcclxuICAgICAgICAgIC8vIFRoZW4gc29ydCBieSBhdWRpbyBxdWFsaXR5IChiaXRyYXRlKVxyXG4gICAgICAgICAgcmV0dXJuIChiLmF1ZGlvQml0cmF0ZSB8fCAwKSAtIChhLmF1ZGlvQml0cmF0ZSB8fCAwKTtcclxuICAgICAgICB9KVswXTtcclxuXHJcbiAgICAgICAgaWYgKCFmb3JtYXQpIHtcclxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ05vIHN1aXRhYmxlIGF1ZGlvIGZvcm1hdCBmb3VuZCcpKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdTZWxlY3RlZCBhdWRpbyBmb3JtYXQ6Jywge1xyXG4gICAgICAgICAgY29udGFpbmVyOiBmb3JtYXQuY29udGFpbmVyLFxyXG4gICAgICAgICAgY29kZWM6IGZvcm1hdC5jb2RlY3MsXHJcbiAgICAgICAgICBxdWFsaXR5OiBmb3JtYXQucXVhbGl0eSxcclxuICAgICAgICAgIGJpdHJhdGU6IGZvcm1hdC5hdWRpb0JpdHJhdGVcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3RyZWFtID0geXRkbC5kb3dubG9hZEZyb21JbmZvKGluZm8sIHsgZm9ybWF0IH0pO1xyXG5cclxuICAgICAgICBzdHJlYW0ub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIHl0ZGwgc3RyZWFtOicsIHtcclxuICAgICAgICAgICAgZXJyb3I6IGVycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcclxuICAgICAgICAgICAgdmlkZW9JZFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB3cml0ZVN0cmVhbSA9IGZzLmNyZWF0ZVdyaXRlU3RyZWFtKHRlbXBQYXRoKTtcclxuXHJcbiAgICAgICAgd3JpdGVTdHJlYW0ub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIHdyaXRlIHN0cmVhbTonLCB7XHJcbiAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICBwYXRoOiB0ZW1wUGF0aFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzdHJlYW0ucGlwZSh3cml0ZVN0cmVhbSlcclxuICAgICAgICAgIC5vbignZmluaXNoJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IGZzLnN0YXRTeW5jKHRlbXBQYXRoKTtcclxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oYEF1ZGlvIGRvd25sb2FkIGNvbXBsZXRlZDogJHt0ZW1wUGF0aH1gLCB7XHJcbiAgICAgICAgICAgICAgZmlsZVNpemU6IHN0YXRzLnNpemVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgZHVyaW5nIGF1ZGlvIGRvd25sb2FkOicsIHtcclxuICAgICAgICAgICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgICAgICBzdGFjazogZXJyb3Iuc3RhY2tcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGdldCB2aWRlbyBpbmZvOicsIHtcclxuICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxyXG4gICAgICAgICAgdmlkZW9JZFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gVmVyaWZ5IHRoZSB0ZW1wIGZpbGUgZXhpc3RzIGFuZCBoYXMgY29udGVudFxyXG4gICAgY29uc3QgdGVtcFN0YXRzID0gZnMuc3RhdFN5bmModGVtcFBhdGgpO1xyXG4gICAgaWYgKHRlbXBTdGF0cy5zaXplID09PSAwKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcignRG93bmxvYWRlZCBhdWRpbyBmaWxlIGlzIGVtcHR5Jyk7XHJcbiAgICB9XHJcbiAgICBsb2dnZXIuaW5mbygnVGVtcCBmaWxlIHZlcmlmaWNhdGlvbjonLCB7XHJcbiAgICAgIHNpemU6IHRlbXBTdGF0cy5zaXplLFxyXG4gICAgICBwYXRoOiB0ZW1wUGF0aFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ29udmVydCB0byBvcHRpbWFsIGZvcm1hdCBmb3IgV2hpc3BlclxyXG4gICAgbG9nZ2VyLmluZm8oJ0NvbnZlcnRpbmcgYXVkaW8gdG8gRkxBQyBmb3JtYXQuLi4nKTtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IHsgc3Rkb3V0LCBzdGRlcnIgfSA9IGF3YWl0IGV4ZWNBc3luYyhgZmZtcGVnIC1pICR7dGVtcFBhdGh9IC1hciAxNjAwMCAtYWMgMSAtYzphIGZsYWMgJHtvdXRwdXRQYXRofWApO1xyXG4gICAgICBsb2dnZXIuZGVidWcoJ0ZGbXBlZyBvdXRwdXQ6JywgeyBzdGRvdXQsIHN0ZGVyciB9KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdGRm1wZWcgY29udmVyc2lvbiBmYWlsZWQ6Jywge1xyXG4gICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIHN0ZG91dDogZXJyb3Iuc3Rkb3V0LFxyXG4gICAgICAgIHN0ZGVycjogZXJyb3Iuc3RkZXJyXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBWZXJpZnkgdGhlIG91dHB1dCBmaWxlXHJcbiAgICBjb25zdCBzdGF0cyA9IGZzLnN0YXRTeW5jKG91dHB1dFBhdGgpO1xyXG4gICAgaWYgKHN0YXRzLnNpemUgPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb252ZXJ0ZWQgRkxBQyBmaWxlIGlzIGVtcHR5Jyk7XHJcbiAgICB9XHJcbiAgICBsb2dnZXIuaW5mbygnQXVkaW8gY29udmVyc2lvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5OicsIHtcclxuICAgICAgaW5wdXRTaXplOiB0ZW1wU3RhdHMuc2l6ZSxcclxuICAgICAgb3V0cHV0U2l6ZTogc3RhdHMuc2l6ZSxcclxuICAgICAgb3V0cHV0UGF0aFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gQ2xlYW4gdXAgdGVtcCBmaWxlXHJcbiAgICBmcy51bmxpbmtTeW5jKHRlbXBQYXRoKTtcclxuICAgIGxvZ2dlci5pbmZvKCdUZW1wb3JhcnkgTVAzIGZpbGUgY2xlYW5lZCB1cCcpO1xyXG5cclxuICAgIHJldHVybiBvdXRwdXRQYXRoO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBsb2dnZXIuZXJyb3IoJ0Vycm9yIGluIGRvd25sb2FkQXVkaW86Jywge1xyXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHtcclxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFja1xyXG4gICAgICB9IDogZXJyb3IsXHJcbiAgICAgIHZpZGVvSWQsXHJcbiAgICAgIHRlbXBQYXRoLFxyXG4gICAgICBvdXRwdXRQYXRoXHJcbiAgICB9KTtcclxuICAgIC8vIENsZWFuIHVwIGFueSBmaWxlcyBpbiBjYXNlIG9mIGVycm9yXHJcbiAgICBpZiAoZnMuZXhpc3RzU3luYyh0ZW1wUGF0aCkpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBmcy51bmxpbmtTeW5jKHRlbXBQYXRoKTtcclxuICAgICAgICBsb2dnZXIuaW5mbygnQ2xlYW5lZCB1cCB0ZW1wIE1QMyBmaWxlIGFmdGVyIGVycm9yJyk7XHJcbiAgICAgIH0gY2F0Y2ggKGNsZWFudXBFcnJvcikge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNsZWFudXAgdGVtcCBNUDMgZmlsZTonLCBjbGVhbnVwRXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoZnMuZXhpc3RzU3luYyhvdXRwdXRQYXRoKSkge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGZzLnVubGlua1N5bmMob3V0cHV0UGF0aCk7XHJcbiAgICAgICAgbG9nZ2VyLmluZm8oJ0NsZWFuZWQgdXAgRkxBQyBmaWxlIGFmdGVyIGVycm9yJyk7XHJcbiAgICAgIH0gY2F0Y2ggKGNsZWFudXBFcnJvcikge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNsZWFudXAgRkxBQyBmaWxlOicsIGNsZWFudXBFcnJvcik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRocm93IGVycm9yO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gdHJhbnNjcmliZVdpdGhXaGlzcGVyKGF1ZGlvUGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICB0cnkge1xyXG4gICAgbG9nZ2VyLmluZm8oJ1N0YXJ0aW5nIHRyYW5zY3JpcHRpb24gcHJvY2VzcyB3aXRoIE9wZW5BSSBXaGlzcGVyJyk7XHJcblxyXG4gICAgLy8gVmVyaWZ5IGlucHV0IGZpbGVcclxuICAgIGNvbnN0IGlucHV0U3RhdHMgPSBmcy5zdGF0U3luYyhhdWRpb1BhdGgpO1xyXG4gICAgbG9nZ2VyLmRlYnVnKCdJbnB1dCBmaWxlIGRldGFpbHM6Jywge1xyXG4gICAgICBzaXplOiBpbnB1dFN0YXRzLnNpemUsXHJcbiAgICAgIHBhdGg6IGF1ZGlvUGF0aFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3Qgb3BlbmFpID0gZ2V0T3BlbkFJQ2xpZW50KCk7XHJcbiAgICBpZiAoIW9wZW5haSkge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ09wZW5BSSBBUEkga2V5IG5vdCBjb25maWd1cmVkIGZvciBXaGlzcGVyIHRyYW5zY3JpcHRpb24uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmVhZCBmaWxlIGFzIGJ1ZmZlclxyXG4gICAgY29uc3QgYXVkaW9CdWZmZXIgPSBhd2FpdCBmcy5wcm9taXNlcy5yZWFkRmlsZShhdWRpb1BhdGgpO1xyXG4gICAgbG9nZ2VyLmluZm8oYFJlYWQgYXVkaW8gZmlsZSBvZiBzaXplOiAke2F1ZGlvQnVmZmVyLmxlbmd0aH0gYnl0ZXNgKTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBsb2dnZXIuaW5mbygnU2VuZGluZyByZXF1ZXN0IHRvIE9wZW5BSSBXaGlzcGVyIEFQSS4uLicpO1xyXG4gICAgICBjb25zdCB0cmFuc2NyaXB0aW9uID0gYXdhaXQgb3BlbmFpLmF1ZGlvLnRyYW5zY3JpcHRpb25zLmNyZWF0ZSh7XHJcbiAgICAgICAgZmlsZTogbmV3IEZpbGUoW2F1ZGlvQnVmZmVyXSwgJ2F1ZGlvLmZsYWMnLCB7IHR5cGU6ICdhdWRpby9mbGFjJyB9KSxcclxuICAgICAgICBtb2RlbDogJ3doaXNwZXItMScsXHJcbiAgICAgICAgbGFuZ3VhZ2U6ICdhdXRvJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxvZ2dlci5pbmZvKCdTdWNjZXNzZnVsbHkgcmVjZWl2ZWQgdHJhbnNjcmlwdGlvbiBmcm9tIFdoaXNwZXInKTtcclxuICAgICAgcmV0dXJuIHRyYW5zY3JpcHRpb24udGV4dDtcclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignVHJhbnNjcmlwdGlvbiByZXF1ZXN0IGZhaWxlZDonLCBlcnJvcik7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgV2hpc3BlciB0cmFuc2NyaXB0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlIHx8ICdVbmtub3duIGVycm9yJ31gKTtcclxuICAgIH1cclxuICB9IGZpbmFsbHkge1xyXG4gICAgLy8gQ2xlYW51cDogRGVsZXRlIHRoZSB0ZW1wb3JhcnkgYXVkaW8gZmlsZVxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZnMucHJvbWlzZXMudW5saW5rKGF1ZGlvUGF0aCk7XHJcbiAgICAgIGxvZ2dlci5pbmZvKCdDbGVhbmVkIHVwIHRlbXBvcmFyeSBhdWRpbyBmaWxlJyk7XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgdGVtcG9yYXJ5IGF1ZGlvIGZpbGU6JywgZXJyb3IpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0VHJhbnNjcmlwdCh2aWRlb0lkOiBzdHJpbmcpOiBQcm9taXNlPHsgdHJhbnNjcmlwdDogc3RyaW5nOyBzb3VyY2U6ICd5b3V0dWJlJyB8ICd3aGlzcGVyJzsgdGl0bGU6IHN0cmluZyB9PiB7XHJcbiAgdHJ5IHtcclxuICAgIGxvZ2dlci5pbmZvKGBBdHRlbXB0aW5nIHRvIGZldGNoIFlvdVR1YmUgdHJhbnNjcmlwdCBmb3IgdmlkZW8gJHt2aWRlb0lkfWApO1xyXG4gICAgLy8gRmlyc3QgdHJ5IFlvdVR1YmUgdHJhbnNjcmlwdHNcclxuICAgIGNvbnN0IHRyYW5zY3JpcHRMaXN0ID0gYXdhaXQgWW91dHViZVRyYW5zY3JpcHQuZmV0Y2hUcmFuc2NyaXB0KHZpZGVvSWQpO1xyXG5cclxuICAgIC8vIEV4dHJhY3QgdGl0bGUgYW5kIHByb2Nlc3MgdHJhbnNjcmlwdCBhcyBiZWZvcmVcclxuICAgIGNvbnN0IGZpcnN0RmV3TGluZXMgPSB0cmFuc2NyaXB0TGlzdC5zbGljZSgwLCA1KS5tYXAoaXRlbSA9PiBpdGVtLnRleHQpLmpvaW4oJyAnKTtcclxuICAgIGxldCB0aXRsZSA9IGZpcnN0RmV3TGluZXMuc3BsaXQoJy4nKVswXS50cmltKCk7XHJcblxyXG4gICAgaWYgKHRpdGxlLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICB0aXRsZSA9IHRpdGxlLnN1YnN0cmluZygwLCA5NykgKyAnLi4uJztcclxuICAgIH1cclxuICAgIGlmICh0aXRsZS5sZW5ndGggPCAxMCkge1xyXG4gICAgICB0aXRsZSA9IGBZb3VUdWJlIFZpZGVvIFN1bW1hcnlgO1xyXG4gICAgfVxyXG5cclxuICAgIGxvZ2dlci5pbmZvKCdTdWNjZXNzZnVsbHkgcmV0cmlldmVkIFlvdVR1YmUgdHJhbnNjcmlwdCcpO1xyXG4gICAgbG9nZ2VyLmRlYnVnKCdUcmFuc2NyaXB0IGRldGFpbHM6Jywge1xyXG4gICAgICB0aXRsZSxcclxuICAgICAgbGVuZ3RoOiB0cmFuc2NyaXB0TGlzdC5sZW5ndGgsXHJcbiAgICAgIGZpcnN0TGluZTogdHJhbnNjcmlwdExpc3RbMF0/LnRleHRcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRyYW5zY3JpcHQ6IHRyYW5zY3JpcHRMaXN0Lm1hcChpdGVtID0+IGl0ZW0udGV4dCkuam9pbignICcpLFxyXG4gICAgICBzb3VyY2U6ICd5b3V0dWJlJyxcclxuICAgICAgdGl0bGVcclxuICAgIH07XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5pbmZvKCdZb3VUdWJlIHRyYW5zY3JpcHQgbm90IGF2YWlsYWJsZSwgZmFsbGluZyBiYWNrIHRvIFdoaXNwZXIuLi4nLCB7XHJcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcilcclxuICAgIH0pO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgIC8vIEdldCB2aWRlbyBpbmZvIGZvciB0aXRsZVxyXG4gICAgICBsb2dnZXIuaW5mbygnRmV0Y2hpbmcgdmlkZW8gaW5mbyBmcm9tIFlvdVR1YmUnKTtcclxuICAgICAgY29uc3QgdmlkZW9JbmZvID0gYXdhaXQgeXRkbC5nZXRJbmZvKHZpZGVvSWQpLmNhdGNoKGluZm9FcnJvciA9PiB7XHJcbiAgICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHZpZGVvIGluZm86Jywge1xyXG4gICAgICAgICAgZXJyb3I6IGluZm9FcnJvciBpbnN0YW5jZW9mIEVycm9yID8ge1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBpbmZvRXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgICAgc3RhY2s6IGluZm9FcnJvci5zdGFja1xyXG4gICAgICAgICAgfSA6IGluZm9FcnJvcixcclxuICAgICAgICAgIHZpZGVvSWRcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aHJvdyBpbmZvRXJyb3I7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgdGl0bGUgPSB2aWRlb0luZm8udmlkZW9EZXRhaWxzLnRpdGxlO1xyXG4gICAgICBsb2dnZXIuaW5mbygnVmlkZW8gaW5mbyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5OicsIHtcclxuICAgICAgICB0aXRsZSxcclxuICAgICAgICBkdXJhdGlvbjogdmlkZW9JbmZvLnZpZGVvRGV0YWlscy5sZW5ndGhTZWNvbmRzLFxyXG4gICAgICAgIGF1dGhvcjogdmlkZW9JbmZvLnZpZGVvRGV0YWlscy5hdXRob3IubmFtZVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vIENoZWNrIGlmIE9wZW5BSSBBUEkgaXMgYXZhaWxhYmxlXHJcbiAgICAgIGNvbnN0IG9wZW5haSA9IGdldE9wZW5BSUNsaWVudCgpO1xyXG4gICAgICBpZiAoIW9wZW5haSkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gJ1RyYW5zY3JpcHQgbm90IGF2YWlsYWJsZSBhbmQgT3BlbkFJIEFQSSBrZXkgbm90IGNvbmZpZ3VyZWQgZm9yIFdoaXNwZXIgZmFsbGJhY2suJztcclxuICAgICAgICBsb2dnZXIuZXJyb3IoZXJyb3IsIHsgbWVzc2FnZTogZXJyb3IgfSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gRG93bmxvYWQgYW5kIHRyYW5zY3JpYmVcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhdWRpb1BhdGggPSBhd2FpdCBkb3dubG9hZEF1ZGlvKHZpZGVvSWQpO1xyXG4gICAgICAgIGxvZ2dlci5pbmZvKCdBdWRpbyBkb3dubG9hZGVkIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICAgIHBhdGg6IGF1ZGlvUGF0aCxcclxuICAgICAgICAgIGZpbGVTdGF0czogZnMuc3RhdFN5bmMoYXVkaW9QYXRoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCB0cmFuc2NyaXB0ID0gYXdhaXQgdHJhbnNjcmliZVdpdGhXaGlzcGVyKGF1ZGlvUGF0aCk7XHJcbiAgICAgICAgbG9nZ2VyLmluZm8oJ1RyYW5zY3JpcHRpb24gY29tcGxldGVkIHN1Y2Nlc3NmdWxseScsIHtcclxuICAgICAgICAgIHRyYW5zY3JpcHRMZW5ndGg6IHRyYW5zY3JpcHQubGVuZ3RoXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB7IHRyYW5zY3JpcHQsIHNvdXJjZTogJ3doaXNwZXInLCB0aXRsZSB9O1xyXG4gICAgICB9IGNhdGNoIChwcm9jZXNzaW5nRXJyb3I6IHVua25vd24pIHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoJ1Byb2Nlc3NpbmcgZXJyb3I6Jywge1xyXG4gICAgICAgICAgcGhhc2U6IHR5cGVvZiBwcm9jZXNzaW5nRXJyb3IgPT09ICdvYmplY3QnICYmIHByb2Nlc3NpbmdFcnJvciAhPT0gbnVsbCAmJiAncGhhc2UnIGluIHByb2Nlc3NpbmdFcnJvciA/XHJcbiAgICAgICAgICAgIChwcm9jZXNzaW5nRXJyb3IgYXMgeyBwaGFzZT86IHN0cmluZyB9KS5waGFzZSA6ICd1bmtub3duJyxcclxuICAgICAgICAgIGVycm9yOiBwcm9jZXNzaW5nRXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogcHJvY2Vzc2luZ0Vycm9yLm1lc3NhZ2UsXHJcbiAgICAgICAgICAgIHN0YWNrOiBwcm9jZXNzaW5nRXJyb3Iuc3RhY2tcclxuICAgICAgICAgIH0gOiBTdHJpbmcocHJvY2Vzc2luZ0Vycm9yKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRocm93IHByb2Nlc3NpbmdFcnJvcjtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbG9nZ2VyLmVycm9yKCdGYWlsZWQgdG8gZ2V0IHRyYW5zY3JpcHQ6Jywge1xyXG4gICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8ge1xyXG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcclxuICAgICAgICAgIHN0YWNrOiBlcnJvci5zdGFja1xyXG4gICAgICAgIH0gOiBlcnJvcixcclxuICAgICAgICB2aWRlb0lkXHJcbiAgICAgIH0pO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBwcm9jZXNzIHZpZGVvOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKX1gKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbi8vIEFkZCBuZXcgZW5kcG9pbnQgdG8gY2hlY2sgQVBJIGtleSBhdmFpbGFiaWxpdHlcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IFJlcXVlc3QpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oY2hlY2tBcGlLZXlBdmFpbGFiaWxpdHkoKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xyXG4gIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcclxuICBjb25zdCBzdHJlYW0gPSBuZXcgVHJhbnNmb3JtU3RyZWFtKCk7XHJcbiAgY29uc3Qgd3JpdGVyID0gc3RyZWFtLndyaXRhYmxlLmdldFdyaXRlcigpO1xyXG5cclxuICBjb25zdCB3cml0ZVByb2dyZXNzID0gYXN5bmMgKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgYXdhaXQgd3JpdGVyLndyaXRlKGVuY29kZXIuZW5jb2RlKEpTT04uc3RyaW5naWZ5KGRhdGEpICsgJ1xcbicpKTtcclxuICB9O1xyXG5cclxuICAoYXN5bmMgKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgeyB1cmwsIGxhbmd1YWdlLCBtb2RlLCBhaU1vZGVsID0gJ2dlbWluaScgfSA9IGF3YWl0IHJlcS5qc29uKCk7XHJcbiAgICAgIGNvbnN0IHZpZGVvSWQgPSBleHRyYWN0VmlkZW9JZCh1cmwpO1xyXG5cclxuICAgICAgbG9nZ2VyLmluZm8oJ1Byb2Nlc3NpbmcgdmlkZW8gcmVxdWVzdCcsIHtcclxuICAgICAgICB2aWRlb0lkLFxyXG4gICAgICAgIGxhbmd1YWdlLFxyXG4gICAgICAgIG1vZGUsXHJcbiAgICAgICAgYWlNb2RlbFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmICghQUlfTU9ERUxTW2FpTW9kZWwgYXMga2V5b2YgdHlwZW9mIEFJX01PREVMU10pIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgQUkgbW9kZWwgc2VsZWN0ZWQuIFBsZWFzZSBjaG9vc2UgZnJvbTogJHtPYmplY3QudmFsdWVzKE1PREVMX05BTUVTKS5qb2luKCcsICcpfWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBzZWxlY3RlZE1vZGVsID0gQUlfTU9ERUxTW2FpTW9kZWwgYXMga2V5b2YgdHlwZW9mIEFJX01PREVMU107XHJcbiAgICAgIGxvZ2dlci5pbmZvKGBVc2luZyAke01PREVMX05BTUVTW2FpTW9kZWwgYXMga2V5b2YgdHlwZW9mIE1PREVMX05BTUVTXX0gbW9kZWwgZm9yIGdlbmVyYXRpb24uLi5gKTtcclxuXHJcbiAgICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0XHJcbiAgICAgIGNvbnN0IGV4aXN0aW5nU3VtbWFyeSA9IGF3YWl0IHByaXNtYS5zdW1tYXJ5LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgIHZpZGVvSWQsXHJcbiAgICAgICAgICBsYW5ndWFnZVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICBpZiAoZXhpc3RpbmdTdW1tYXJ5KSB7XHJcbiAgICAgICAgYXdhaXQgd3JpdGVQcm9ncmVzcyh7XHJcbiAgICAgICAgICB0eXBlOiAnY29tcGxldGUnLFxyXG4gICAgICAgICAgc3VtbWFyeTogZXhpc3RpbmdTdW1tYXJ5LmNvbnRlbnQsXHJcbiAgICAgICAgICBzb3VyY2U6ICdjYWNoZScsXHJcbiAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgYXdhaXQgd3JpdGVyLmNsb3NlKCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZXQgdHJhbnNjcmlwdFxyXG4gICAgICBhd2FpdCB3cml0ZVByb2dyZXNzKHtcclxuICAgICAgICB0eXBlOiAncHJvZ3Jlc3MnLFxyXG4gICAgICAgIGN1cnJlbnRDaHVuazogMCxcclxuICAgICAgICB0b3RhbENodW5rczogMSxcclxuICAgICAgICBzdGFnZTogJ2FuYWx5emluZycsXHJcbiAgICAgICAgbWVzc2FnZTogJ0ZldGNoaW5nIHZpZGVvIHRyYW5zY3JpcHQuLi4nXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgY29uc3QgeyB0cmFuc2NyaXB0LCBzb3VyY2UsIHRpdGxlIH0gPSBhd2FpdCBnZXRUcmFuc2NyaXB0KHZpZGVvSWQpO1xyXG4gICAgICBjb25zdCBjaHVua3MgPSBhd2FpdCBzcGxpdFRyYW5zY3JpcHRJbnRvQ2h1bmtzKHRyYW5zY3JpcHQpO1xyXG4gICAgICBjb25zdCB0b3RhbENodW5rcyA9IGNodW5rcy5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IGludGVybWVkaWF0ZVN1bW1hcmllcyA9IFtdO1xyXG5cclxuICAgICAgLy8gUHJvY2VzcyBjaHVua3NcclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaHVua3MubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBhd2FpdCB3cml0ZVByb2dyZXNzKHtcclxuICAgICAgICAgIHR5cGU6ICdwcm9ncmVzcycsXHJcbiAgICAgICAgICBjdXJyZW50Q2h1bms6IGkgKyAxLFxyXG4gICAgICAgICAgdG90YWxDaHVua3MsXHJcbiAgICAgICAgICBzdGFnZTogJ3Byb2Nlc3NpbmcnLFxyXG4gICAgICAgICAgbWVzc2FnZTogYFByb2Nlc3Npbmcgc2VjdGlvbiAke2kgKyAxfSBvZiAke3RvdGFsQ2h1bmtzfS4uLmBcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgcHJvbXB0ID0gYENyZWF0ZSBhIGRldGFpbGVkIHN1bW1hcnkgb2Ygc2VjdGlvbiAke2kgKyAxfSBpbiAke2xhbmd1YWdlfS5cclxuICAgICAgICBNYWludGFpbiBhbGwgaW1wb3J0YW50IGluZm9ybWF0aW9uLCBhcmd1bWVudHMsIGFuZCBjb25uZWN0aW9ucy5cclxuICAgICAgICBQYXkgc3BlY2lhbCBhdHRlbnRpb24gdG86XHJcbiAgICAgICAgLSBNYWluIHRvcGljcyBhbmQgYXJndW1lbnRzXHJcbiAgICAgICAgLSBJbXBvcnRhbnQgZGV0YWlscyBhbmQgZXhhbXBsZXNcclxuICAgICAgICAtIENvbm5lY3Rpb25zIHdpdGggb3RoZXIgbWVudGlvbmVkIHRvcGljc1xyXG4gICAgICAgIC0gS2V5IHN0YXRlbWVudHMgYW5kIGNvbmNsdXNpb25zXHJcblxyXG4gICAgICAgIFRleHQ6ICR7Y2h1bmtzW2ldfWA7XHJcblxyXG4gICAgICAgIGNvbnN0IHRleHQgPSBhd2FpdCBzZWxlY3RlZE1vZGVsLmdlbmVyYXRlQ29udGVudChwcm9tcHQpO1xyXG4gICAgICAgIGludGVybWVkaWF0ZVN1bW1hcmllcy5wdXNoKHRleHQpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyBHZW5lcmF0ZSBmaW5hbCBzdW1tYXJ5XHJcbiAgICAgIGF3YWl0IHdyaXRlUHJvZ3Jlc3Moe1xyXG4gICAgICAgIHR5cGU6ICdwcm9ncmVzcycsXHJcbiAgICAgICAgY3VycmVudENodW5rOiB0b3RhbENodW5rcyxcclxuICAgICAgICB0b3RhbENodW5rcyxcclxuICAgICAgICBzdGFnZTogJ2ZpbmFsaXppbmcnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdDcmVhdGluZyBmaW5hbCBzdW1tYXJ5Li4uJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IGNvbWJpbmVkU3VtbWFyeSA9IGludGVybWVkaWF0ZVN1bW1hcmllcy5qb2luKCdcXG5cXG49PT0gTmV4dCBTZWN0aW9uID09PVxcblxcbicpO1xyXG4gICAgICBjb25zdCBmaW5hbFByb21wdCA9IGNyZWF0ZVN1bW1hcnlQcm9tcHQoY29tYmluZWRTdW1tYXJ5LCBsYW5ndWFnZSwgbW9kZSk7XHJcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBhd2FpdCBzZWxlY3RlZE1vZGVsLmdlbmVyYXRlQ29udGVudChmaW5hbFByb21wdCk7XHJcblxyXG4gICAgICBpZiAoIXN1bW1hcnkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHN1bW1hcnkgY29udGVudCBnZW5lcmF0ZWQnKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gU2F2ZSB0byBkYXRhYmFzZVxyXG4gICAgICBhd2FpdCB3cml0ZVByb2dyZXNzKHtcclxuICAgICAgICB0eXBlOiAncHJvZ3Jlc3MnLFxyXG4gICAgICAgIGN1cnJlbnRDaHVuazogdG90YWxDaHVua3MsXHJcbiAgICAgICAgdG90YWxDaHVua3MsXHJcbiAgICAgICAgc3RhZ2U6ICdzYXZpbmcnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdTYXZpbmcgc3VtbWFyeSB0byBoaXN0b3J5Li4uJ1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgc3VtbWFyeSBhbHJlYWR5IGV4aXN0c1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU3VtbWFyeSA9IGF3YWl0IHByaXNtYS5zdW1tYXJ5LmZpbmRGaXJzdCh7XHJcbiAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICB2aWRlb0lkLFxyXG4gICAgICAgICAgICBsYW5ndWFnZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBsZXQgc2F2ZWRTdW1tYXJ5O1xyXG4gICAgICAgIGlmIChleGlzdGluZ1N1bW1hcnkpIHtcclxuICAgICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyBzdW1tYXJ5XHJcbiAgICAgICAgICBzYXZlZFN1bW1hcnkgPSBhd2FpdCBwcmlzbWEuc3VtbWFyeS51cGRhdGUoe1xyXG4gICAgICAgICAgICB3aGVyZToge1xyXG4gICAgICAgICAgICAgIGlkOiBleGlzdGluZ1N1bW1hcnkuaWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHN1bW1hcnksXHJcbiAgICAgICAgICAgICAgbW9kZSxcclxuICAgICAgICAgICAgICBzb3VyY2UsXHJcbiAgICAgICAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBDcmVhdGUgbmV3IHN1bW1hcnlcclxuICAgICAgICAgIHNhdmVkU3VtbWFyeSA9IGF3YWl0IHByaXNtYS5zdW1tYXJ5LmNyZWF0ZSh7XHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICB2aWRlb0lkLFxyXG4gICAgICAgICAgICAgIHRpdGxlLFxyXG4gICAgICAgICAgICAgIGNvbnRlbnQ6IHN1bW1hcnksXHJcbiAgICAgICAgICAgICAgbGFuZ3VhZ2UsXHJcbiAgICAgICAgICAgICAgbW9kZSxcclxuICAgICAgICAgICAgICBzb3VyY2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhd2FpdCB3cml0ZVByb2dyZXNzKHtcclxuICAgICAgICAgIHR5cGU6ICdjb21wbGV0ZScsXHJcbiAgICAgICAgICBzdW1tYXJ5OiBzYXZlZFN1bW1hcnkuY29udGVudCxcclxuICAgICAgICAgIHNvdXJjZTogc2F2ZWRTdW1tYXJ5LnNvdXJjZSB8fCAneW91dHViZScsXHJcbiAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3I6IGFueSkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignV2FybmluZzogRmFpbGVkIHRvIHNhdmUgdG8gZGF0YWJhc2UgLScsIGRiRXJyb3I/Lm1lc3NhZ2UgfHwgJ1Vua25vd24gZGF0YWJhc2UgZXJyb3InKTtcclxuXHJcbiAgICAgICAgLy8gU3RpbGwgcmV0dXJuIHRoZSBzdW1tYXJ5IGV2ZW4gaWYgc2F2aW5nIGZhaWxlZFxyXG4gICAgICAgIGF3YWl0IHdyaXRlUHJvZ3Jlc3Moe1xyXG4gICAgICAgICAgdHlwZTogJ2NvbXBsZXRlJyxcclxuICAgICAgICAgIHN1bW1hcnksXHJcbiAgICAgICAgICBzb3VyY2U6IHNvdXJjZSB8fCAneW91dHViZScsXHJcbiAgICAgICAgICBzdGF0dXM6ICdjb21wbGV0ZWQnLFxyXG4gICAgICAgICAgd2FybmluZzogJ0ZhaWxlZCB0byBzYXZlIHRvIGhpc3RvcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgIGxvZ2dlci5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyB2aWRlbzonLCB7XHJcbiAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgc3RhY2s6IGVycm9yPy5zdGFjayxcclxuICAgICAgICBjYXVzZTogZXJyb3I/LmNhdXNlXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgYXdhaXQgd3JpdGVQcm9ncmVzcyh7XHJcbiAgICAgICAgdHlwZTogJ2Vycm9yJyxcclxuICAgICAgICBlcnJvcjogZXJyb3I/Lm1lc3NhZ2UgfHwgJ0ZhaWxlZCB0byBwcm9jZXNzIHZpZGVvJyxcclxuICAgICAgICBkZXRhaWxzOiBlcnJvcj8udG9TdHJpbmcoKSB8fCAnVW5rbm93biBlcnJvcidcclxuICAgICAgfSkuY2F0Y2goKHdyaXRlRXJyb3IpID0+IHtcclxuICAgICAgICBsb2dnZXIuZXJyb3IoJ0ZhaWxlZCB0byB3cml0ZSBlcnJvciBwcm9ncmVzczonLCB3cml0ZUVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGZpbmFsbHkge1xyXG4gICAgICBhd2FpdCB3cml0ZXIuY2xvc2UoKS5jYXRjaCgoY2xvc2VFcnJvcikgPT4ge1xyXG4gICAgICAgIGxvZ2dlci5lcnJvcignRmFpbGVkIHRvIGNsb3NlIHdyaXRlcjonLCBjbG9zZUVycm9yKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSkoKTtcclxuXHJcbiAgcmV0dXJuIG5ldyBSZXNwb25zZShzdHJlYW0ucmVhZGFibGUsIHtcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2V2ZW50LXN0cmVhbScsXHJcbiAgICAgICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyxcclxuICAgICAgJ0Nvbm5lY3Rpb24nOiAna2VlcC1hbGl2ZScsXHJcbiAgICB9LFxyXG4gIH0pO1xyXG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsIllvdXR1YmVUcmFuc2NyaXB0IiwicHJpc21hIiwiZXh0cmFjdFZpZGVvSWQiLCJjcmVhdGVTdW1tYXJ5UHJvbXB0IiwiR29vZ2xlR2VuZXJhdGl2ZUFJIiwiR3JvcSIsIk9wZW5BSSIsInl0ZGwiLCJmcyIsInBhdGgiLCJleGVjIiwicHJvbWlzaWZ5IiwiZXhlY0FzeW5jIiwibG9nZ2VyIiwiaW5mbyIsIm1lc3NhZ2UiLCJkYXRhIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsInN0YXR1cyIsInN0YWNrIiwiY2F1c2UiLCJkZXRhaWxzIiwicmVzcG9uc2UiLCJkZWJ1ZyIsImdldEdlbWluaUNsaWVudCIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsImdlbkFJIiwiZ2V0R3JvcUNsaWVudCIsIkdST1FfQVBJX0tFWSIsImdldE9wZW5BSUNsaWVudCIsIk9QRU5BSV9BUElfS0VZIiwiTU9ERUxfTkFNRVMiLCJnZW1pbmkiLCJncm9xIiwiZ3B0NCIsImNoZWNrQXBpS2V5QXZhaWxhYmlsaXR5IiwiY2xlYW5Nb2RlbE91dHB1dCIsInRleHQiLCJyZXBsYWNlIiwidHJpbSIsIkFJX01PREVMUyIsIm5hbWUiLCJnZW5lcmF0ZUNvbnRlbnQiLCJwcm9tcHQiLCJFcnJvciIsIm1vZGVsIiwiZ2V0R2VuZXJhdGl2ZU1vZGVsIiwicmVzdWx0Iiwic3BsaXRUcmFuc2NyaXB0SW50b0NodW5rcyIsInRyYW5zY3JpcHQiLCJjaHVua1NpemUiLCJvdmVybGFwIiwid29yZHMiLCJzcGxpdCIsImNodW5rcyIsImN1cnJlbnRDaHVuayIsImN1cnJlbnRMZW5ndGgiLCJ3b3JkIiwibGVuZ3RoIiwicHVzaCIsImpvaW4iLCJvdmVybGFwV29yZHMiLCJzbGljZSIsIk1hdGgiLCJmbG9vciIsImRvd25sb2FkQXVkaW8iLCJ2aWRlb0lkIiwidGVtcFBhdGgiLCJvdXRwdXRQYXRoIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJ2aWRlb1VybCIsImdldEluZm8iLCJ0aGVuIiwidGl0bGUiLCJ2aWRlb0RldGFpbHMiLCJkdXJhdGlvbiIsImxlbmd0aFNlY29uZHMiLCJhdWRpb0Zvcm1hdHMiLCJmaWx0ZXJGb3JtYXRzIiwiZm9ybWF0cyIsImZvcm1hdCIsInNvcnQiLCJhIiwiYiIsImNvZGVjcyIsImluY2x1ZGVzIiwiYXVkaW9CaXRyYXRlIiwiY29udGFpbmVyIiwiY29kZWMiLCJxdWFsaXR5IiwiYml0cmF0ZSIsInN0cmVhbSIsImRvd25sb2FkRnJvbUluZm8iLCJvbiIsIndyaXRlU3RyZWFtIiwiY3JlYXRlV3JpdGVTdHJlYW0iLCJwaXBlIiwic3RhdHMiLCJzdGF0U3luYyIsImZpbGVTaXplIiwic2l6ZSIsImNhdGNoIiwidGVtcFN0YXRzIiwic3Rkb3V0Iiwic3RkZXJyIiwiaW5wdXRTaXplIiwib3V0cHV0U2l6ZSIsInVubGlua1N5bmMiLCJleGlzdHNTeW5jIiwiY2xlYW51cEVycm9yIiwidHJhbnNjcmliZVdpdGhXaGlzcGVyIiwiYXVkaW9QYXRoIiwiaW5wdXRTdGF0cyIsIm9wZW5haSIsImF1ZGlvQnVmZmVyIiwicHJvbWlzZXMiLCJyZWFkRmlsZSIsInRyYW5zY3JpcHRpb24iLCJhdWRpbyIsInRyYW5zY3JpcHRpb25zIiwiY3JlYXRlIiwiZmlsZSIsIkZpbGUiLCJ0eXBlIiwibGFuZ3VhZ2UiLCJ1bmxpbmsiLCJnZXRUcmFuc2NyaXB0IiwidHJhbnNjcmlwdExpc3QiLCJmZXRjaFRyYW5zY3JpcHQiLCJmaXJzdEZld0xpbmVzIiwibWFwIiwiaXRlbSIsInN1YnN0cmluZyIsImZpcnN0TGluZSIsInNvdXJjZSIsIlN0cmluZyIsInZpZGVvSW5mbyIsImluZm9FcnJvciIsImF1dGhvciIsImZpbGVTdGF0cyIsInRyYW5zY3JpcHRMZW5ndGgiLCJwcm9jZXNzaW5nRXJyb3IiLCJwaGFzZSIsIkdFVCIsInJlcSIsImpzb24iLCJQT1NUIiwiZW5jb2RlciIsIlRleHRFbmNvZGVyIiwiVHJhbnNmb3JtU3RyZWFtIiwid3JpdGVyIiwid3JpdGFibGUiLCJnZXRXcml0ZXIiLCJ3cml0ZVByb2dyZXNzIiwid3JpdGUiLCJlbmNvZGUiLCJ1cmwiLCJtb2RlIiwiYWlNb2RlbCIsIk9iamVjdCIsInZhbHVlcyIsInNlbGVjdGVkTW9kZWwiLCJleGlzdGluZ1N1bW1hcnkiLCJzdW1tYXJ5IiwiZmluZEZpcnN0Iiwid2hlcmUiLCJjb250ZW50IiwiY2xvc2UiLCJ0b3RhbENodW5rcyIsInN0YWdlIiwiaW50ZXJtZWRpYXRlU3VtbWFyaWVzIiwiaSIsImNvbWJpbmVkU3VtbWFyeSIsImZpbmFsUHJvbXB0Iiwic2F2ZWRTdW1tYXJ5IiwidXBkYXRlIiwiaWQiLCJ1cGRhdGVkQXQiLCJEYXRlIiwiZGJFcnJvciIsIndhcm4iLCJ3YXJuaW5nIiwidG9TdHJpbmciLCJ3cml0ZUVycm9yIiwiY2xvc2VFcnJvciIsIlJlc3BvbnNlIiwicmVhZGFibGUiLCJoZWFkZXJzIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/summarize/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prisma.ts":
/*!***********************!*\
  !*** ./lib/prisma.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJpc21hLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUE4QztBQUU5QyxNQUFNQyxrQkFBa0JDO0FBSWpCLE1BQU1DLFNBQVNGLGdCQUFnQkUsTUFBTSxJQUFJLElBQUlILHdEQUFZQSxHQUFHO0FBRW5FLElBQUlJLElBQXFDLEVBQUU7SUFDekNILGdCQUFnQkUsTUFBTSxHQUFHQTtBQUMzQiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhZ2d5bVxcT25lRHJpdmVcXERlc2t0b3BcXHByb2plY3RzXFx5b3V0dWJlX3N1bW1hcml6ZXJcXGxpYlxccHJpc21hLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gJ0BwcmlzbWEvY2xpZW50JztcclxuXHJcbmNvbnN0IGdsb2JhbEZvclByaXNtYSA9IGdsb2JhbFRoaXMgYXMgdW5rbm93biBhcyB7XHJcbiAgcHJpc21hOiBQcmlzbWFDbGllbnQgfCB1bmRlZmluZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA/PyBuZXcgUHJpc21hQ2xpZW50KCk7XHJcblxyXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gIGdsb2JhbEZvclByaXNtYS5wcmlzbWEgPSBwcmlzbWE7XHJcbn0iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsVGhpcyIsInByaXNtYSIsInByb2Nlc3MiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./lib/youtube.ts":
/*!************************!*\
  !*** ./lib/youtube.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AVAILABLE_LANGUAGES: () => (/* binding */ AVAILABLE_LANGUAGES),\n/* harmony export */   createSummaryPrompt: () => (/* binding */ createSummaryPrompt),\n/* harmony export */   extractVideoId: () => (/* binding */ extractVideoId)\n/* harmony export */ });\nfunction extractVideoId(youtube_url) {\n    const patterns = [\n        /(?:v=|\\/)([0-9A-Za-z_-]{11}).*/,\n        /(?:embed\\/)([0-9A-Za-z_-]{11})/,\n        /(?:youtu\\.be\\/)([0-9A-Za-z_-]{11})/,\n        /(?:shorts\\/)([0-9A-Za-z_-]{11})/,\n        /^([0-9A-Za-z_-]{11})$/ // Just the video ID\n    ];\n    const url = youtube_url.trim();\n    for (const pattern of patterns){\n        const match = url.match(pattern);\n        if (match) {\n            return match[1];\n        }\n    }\n    throw new Error(\"Could not extract video ID from URL\");\n}\nconst AVAILABLE_LANGUAGES = {\n    'English': 'en'\n};\nfunction createSummaryPrompt(text, targetLanguage, mode = 'video') {\n    const languagePrompts = {\n        'en': {\n            title: 'TITLE',\n            overview: 'OVERVIEW',\n            keyPoints: 'KEY POINTS',\n            takeaways: 'MAIN TAKEAWAYS',\n            context: 'CONTEXT & IMPLICATIONS'\n        }\n    };\n    const prompts = languagePrompts[targetLanguage] || languagePrompts.en;\n    if (mode === 'podcast') {\n        return `Please provide a detailed podcast-style summary of the following content in ${targetLanguage}.\n    Structure your response as follows:\n\n    🎙️ ${prompts.title}: Create an engaging title\n\n    🎧 ${prompts.overview} (3-5 sentences):\n    - Provide a detailed context and main purpose\n\n    🔍 ${prompts.keyPoints}:\n    - Deep dive into the main arguments\n    - Include specific examples and anecdotes\n    - Highlight unique perspectives and expert opinions\n\n    📈 ${prompts.takeaways}:\n    - List 5-7 practical insights\n    - Explain their significance and potential impact\n\n    🌐 ${prompts.context}:\n    - Broader context discussion\n    - Future implications and expert predictions\n\n    Text to summarize: ${text}\n\n    Ensure the summary is comprehensive enough for someone who hasn't seen the original content.`;\n    }\n    return `Please provide a detailed summary of the following content in ${targetLanguage}.\n  Structure your response as follows:\n\n  🎯 ${prompts.title}: Create a descriptive title\n\n  📝 ${prompts.overview} (2-3 sentences):\n  - Provide a brief context and main purpose\n\n  🔑 ${prompts.keyPoints}:\n  - Extract and explain the main arguments\n  - Include specific examples\n  - Highlight unique perspectives\n\n  💡 ${prompts.takeaways}:\n  - List 3-5 practical insights\n  - Explain their significance\n\n  🔄 ${prompts.context}:\n  - Broader context discussion\n  - Future implications\n\n  Text to summarize: ${text}\n\n  Ensure the summary is comprehensive enough for someone who hasn't seen the original content.`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIveW91dHViZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxTQUFTQSxlQUFlQyxXQUFtQjtJQUNoRCxNQUFNQyxXQUFXO1FBQ2Y7UUFDQTtRQUNBO1FBQ0E7UUFDQSx3QkFBd0Msb0JBQW9CO0tBQzdEO0lBRUQsTUFBTUMsTUFBTUYsWUFBWUcsSUFBSTtJQUU1QixLQUFLLE1BQU1DLFdBQVdILFNBQVU7UUFDOUIsTUFBTUksUUFBUUgsSUFBSUcsS0FBSyxDQUFDRDtRQUN4QixJQUFJQyxPQUFPO1lBQ1QsT0FBT0EsS0FBSyxDQUFDLEVBQUU7UUFDakI7SUFDRjtJQUVBLE1BQU0sSUFBSUMsTUFBTTtBQUNsQjtBQUVPLE1BQU1DLHNCQUFzQjtJQUNqQyxXQUFXO0FBQ2IsRUFBVztBQUVKLFNBQVNDLG9CQUFvQkMsSUFBWSxFQUFFQyxjQUFzQixFQUFFQyxPQUE0QixPQUFPO0lBQzNHLE1BQU1DLGtCQUFrQjtRQUN0QixNQUFNO1lBQ0pDLE9BQU87WUFDUEMsVUFBVTtZQUNWQyxXQUFXO1lBQ1hDLFdBQVc7WUFDWEMsU0FBUztRQUNYO0lBQ0Y7SUFFQSxNQUFNQyxVQUFVTixlQUFlLENBQUNGLGVBQStDLElBQUlFLGdCQUFnQk8sRUFBRTtJQUVyRyxJQUFJUixTQUFTLFdBQVc7UUFDdEIsT0FBTyxDQUFDLDRFQUE0RSxFQUFFRCxlQUFlOzs7UUFHakcsRUFBRVEsUUFBUUwsS0FBSyxDQUFDOztPQUVqQixFQUFFSyxRQUFRSixRQUFRLENBQUM7OztPQUduQixFQUFFSSxRQUFRSCxTQUFTLENBQUM7Ozs7O09BS3BCLEVBQUVHLFFBQVFGLFNBQVMsQ0FBQzs7OztPQUlwQixFQUFFRSxRQUFRRCxPQUFPLENBQUM7Ozs7dUJBSUYsRUFBRVIsS0FBSzs7Z0dBRWtFLENBQUM7SUFDL0Y7SUFFQSxPQUFPLENBQUMsOERBQThELEVBQUVDLGVBQWU7OztLQUdwRixFQUFFUSxRQUFRTCxLQUFLLENBQUM7O0tBRWhCLEVBQUVLLFFBQVFKLFFBQVEsQ0FBQzs7O0tBR25CLEVBQUVJLFFBQVFILFNBQVMsQ0FBQzs7Ozs7S0FLcEIsRUFBRUcsUUFBUUYsU0FBUyxDQUFDOzs7O0tBSXBCLEVBQUVFLFFBQVFELE9BQU8sQ0FBQzs7OztxQkFJRixFQUFFUixLQUFLOzs4RkFFa0UsQ0FBQztBQUMvRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxhZ2d5bVxcT25lRHJpdmVcXERlc2t0b3BcXHByb2plY3RzXFx5b3V0dWJlX3N1bW1hcml6ZXJcXGxpYlxceW91dHViZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZXh0cmFjdFZpZGVvSWQoeW91dHViZV91cmw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgY29uc3QgcGF0dGVybnMgPSBbXHJcbiAgICAvKD86dj18XFwvKShbMC05QS1aYS16Xy1dezExfSkuKi8sICAgICAgLy8gU3RhbmRhcmQgYW5kIHNoYXJlZCBVUkxzXHJcbiAgICAvKD86ZW1iZWRcXC8pKFswLTlBLVphLXpfLV17MTF9KS8sICAgICAgIC8vIEVtYmVkIFVSTHNcclxuICAgIC8oPzp5b3V0dVxcLmJlXFwvKShbMC05QS1aYS16Xy1dezExfSkvLCAgIC8vIFNob3J0ZW5lZCBVUkxzXHJcbiAgICAvKD86c2hvcnRzXFwvKShbMC05QS1aYS16Xy1dezExfSkvLCAgICAgIC8vIFlvdVR1YmUgU2hvcnRzXHJcbiAgICAvXihbMC05QS1aYS16Xy1dezExfSkkLyAgICAgICAgICAgICAgICAgLy8gSnVzdCB0aGUgdmlkZW8gSURcclxuICBdO1xyXG5cclxuICBjb25zdCB1cmwgPSB5b3V0dWJlX3VybC50cmltKCk7XHJcblxyXG4gIGZvciAoY29uc3QgcGF0dGVybiBvZiBwYXR0ZXJucykge1xyXG4gICAgY29uc3QgbWF0Y2ggPSB1cmwubWF0Y2gocGF0dGVybik7XHJcbiAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgcmV0dXJuIG1hdGNoWzFdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGQgbm90IGV4dHJhY3QgdmlkZW8gSUQgZnJvbSBVUkxcIik7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBBVkFJTEFCTEVfTEFOR1VBR0VTID0ge1xyXG4gICdFbmdsaXNoJzogJ2VuJyxcclxufSBhcyBjb25zdDtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTdW1tYXJ5UHJvbXB0KHRleHQ6IHN0cmluZywgdGFyZ2V0TGFuZ3VhZ2U6IHN0cmluZywgbW9kZTogJ3ZpZGVvJyB8ICdwb2RjYXN0JyA9ICd2aWRlbycpIHtcclxuICBjb25zdCBsYW5ndWFnZVByb21wdHMgPSB7XHJcbiAgICAnZW4nOiB7XHJcbiAgICAgIHRpdGxlOiAnVElUTEUnLFxyXG4gICAgICBvdmVydmlldzogJ09WRVJWSUVXJyxcclxuICAgICAga2V5UG9pbnRzOiAnS0VZIFBPSU5UUycsXHJcbiAgICAgIHRha2Vhd2F5czogJ01BSU4gVEFLRUFXQVlTJyxcclxuICAgICAgY29udGV4dDogJ0NPTlRFWFQgJiBJTVBMSUNBVElPTlMnXHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG4gIGNvbnN0IHByb21wdHMgPSBsYW5ndWFnZVByb21wdHNbdGFyZ2V0TGFuZ3VhZ2UgYXMga2V5b2YgdHlwZW9mIGxhbmd1YWdlUHJvbXB0c10gfHwgbGFuZ3VhZ2VQcm9tcHRzLmVuO1xyXG5cclxuICBpZiAobW9kZSA9PT0gJ3BvZGNhc3QnKSB7XHJcbiAgICByZXR1cm4gYFBsZWFzZSBwcm92aWRlIGEgZGV0YWlsZWQgcG9kY2FzdC1zdHlsZSBzdW1tYXJ5IG9mIHRoZSBmb2xsb3dpbmcgY29udGVudCBpbiAke3RhcmdldExhbmd1YWdlfS5cclxuICAgIFN0cnVjdHVyZSB5b3VyIHJlc3BvbnNlIGFzIGZvbGxvd3M6XHJcblxyXG4gICAg8J+Ome+4jyAke3Byb21wdHMudGl0bGV9OiBDcmVhdGUgYW4gZW5nYWdpbmcgdGl0bGVcclxuXHJcbiAgICDwn46nICR7cHJvbXB0cy5vdmVydmlld30gKDMtNSBzZW50ZW5jZXMpOlxyXG4gICAgLSBQcm92aWRlIGEgZGV0YWlsZWQgY29udGV4dCBhbmQgbWFpbiBwdXJwb3NlXHJcblxyXG4gICAg8J+UjSAke3Byb21wdHMua2V5UG9pbnRzfTpcclxuICAgIC0gRGVlcCBkaXZlIGludG8gdGhlIG1haW4gYXJndW1lbnRzXHJcbiAgICAtIEluY2x1ZGUgc3BlY2lmaWMgZXhhbXBsZXMgYW5kIGFuZWNkb3Rlc1xyXG4gICAgLSBIaWdobGlnaHQgdW5pcXVlIHBlcnNwZWN0aXZlcyBhbmQgZXhwZXJ0IG9waW5pb25zXHJcblxyXG4gICAg8J+TiCAke3Byb21wdHMudGFrZWF3YXlzfTpcclxuICAgIC0gTGlzdCA1LTcgcHJhY3RpY2FsIGluc2lnaHRzXHJcbiAgICAtIEV4cGxhaW4gdGhlaXIgc2lnbmlmaWNhbmNlIGFuZCBwb3RlbnRpYWwgaW1wYWN0XHJcblxyXG4gICAg8J+MkCAke3Byb21wdHMuY29udGV4dH06XHJcbiAgICAtIEJyb2FkZXIgY29udGV4dCBkaXNjdXNzaW9uXHJcbiAgICAtIEZ1dHVyZSBpbXBsaWNhdGlvbnMgYW5kIGV4cGVydCBwcmVkaWN0aW9uc1xyXG5cclxuICAgIFRleHQgdG8gc3VtbWFyaXplOiAke3RleHR9XHJcblxyXG4gICAgRW5zdXJlIHRoZSBzdW1tYXJ5IGlzIGNvbXByZWhlbnNpdmUgZW5vdWdoIGZvciBzb21lb25lIHdobyBoYXNuJ3Qgc2VlbiB0aGUgb3JpZ2luYWwgY29udGVudC5gO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGBQbGVhc2UgcHJvdmlkZSBhIGRldGFpbGVkIHN1bW1hcnkgb2YgdGhlIGZvbGxvd2luZyBjb250ZW50IGluICR7dGFyZ2V0TGFuZ3VhZ2V9LlxyXG4gIFN0cnVjdHVyZSB5b3VyIHJlc3BvbnNlIGFzIGZvbGxvd3M6XHJcblxyXG4gIPCfjq8gJHtwcm9tcHRzLnRpdGxlfTogQ3JlYXRlIGEgZGVzY3JpcHRpdmUgdGl0bGVcclxuXHJcbiAg8J+TnSAke3Byb21wdHMub3ZlcnZpZXd9ICgyLTMgc2VudGVuY2VzKTpcclxuICAtIFByb3ZpZGUgYSBicmllZiBjb250ZXh0IGFuZCBtYWluIHB1cnBvc2VcclxuXHJcbiAg8J+UkSAke3Byb21wdHMua2V5UG9pbnRzfTpcclxuICAtIEV4dHJhY3QgYW5kIGV4cGxhaW4gdGhlIG1haW4gYXJndW1lbnRzXHJcbiAgLSBJbmNsdWRlIHNwZWNpZmljIGV4YW1wbGVzXHJcbiAgLSBIaWdobGlnaHQgdW5pcXVlIHBlcnNwZWN0aXZlc1xyXG5cclxuICDwn5KhICR7cHJvbXB0cy50YWtlYXdheXN9OlxyXG4gIC0gTGlzdCAzLTUgcHJhY3RpY2FsIGluc2lnaHRzXHJcbiAgLSBFeHBsYWluIHRoZWlyIHNpZ25pZmljYW5jZVxyXG5cclxuICDwn5SEICR7cHJvbXB0cy5jb250ZXh0fTpcclxuICAtIEJyb2FkZXIgY29udGV4dCBkaXNjdXNzaW9uXHJcbiAgLSBGdXR1cmUgaW1wbGljYXRpb25zXHJcblxyXG4gIFRleHQgdG8gc3VtbWFyaXplOiAke3RleHR9XHJcblxyXG4gIEVuc3VyZSB0aGUgc3VtbWFyeSBpcyBjb21wcmVoZW5zaXZlIGVub3VnaCBmb3Igc29tZW9uZSB3aG8gaGFzbid0IHNlZW4gdGhlIG9yaWdpbmFsIGNvbnRlbnQuYDtcclxufSJdLCJuYW1lcyI6WyJleHRyYWN0VmlkZW9JZCIsInlvdXR1YmVfdXJsIiwicGF0dGVybnMiLCJ1cmwiLCJ0cmltIiwicGF0dGVybiIsIm1hdGNoIiwiRXJyb3IiLCJBVkFJTEFCTEVfTEFOR1VBR0VTIiwiY3JlYXRlU3VtbWFyeVByb21wdCIsInRleHQiLCJ0YXJnZXRMYW5ndWFnZSIsIm1vZGUiLCJsYW5ndWFnZVByb21wdHMiLCJ0aXRsZSIsIm92ZXJ2aWV3Iiwia2V5UG9pbnRzIiwidGFrZWF3YXlzIiwiY29udGV4dCIsInByb21wdHMiLCJlbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/youtube.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/ms","vendor-chunks/openai","vendor-chunks/groq-sdk","vendor-chunks/form-data-encoder","vendor-chunks/ytdl-core","vendor-chunks/whatwg-url","vendor-chunks/m3u8stream","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/node-fetch","vendor-chunks/@google","vendor-chunks/youtube-transcript","vendor-chunks/webidl-conversions","vendor-chunks/sax","vendor-chunks/miniget","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fsummarize%2Froute&page=%2Fapi%2Fsummarize%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsummarize%2Froute.ts&appDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Caggym%5COneDrive%5CDesktop%5Cprojects%5Cyoutube_summarizer&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();